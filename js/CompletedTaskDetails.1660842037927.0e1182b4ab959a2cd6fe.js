"use strict";(self.webpackChunktasks_frontend=self.webpackChunktasks_frontend||[]).push([[292],{2067:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var r=n(4942),s=n(42982),a=n(15861),l=n(70885),c=n(87757),u=n.n(c),o=n(93264),i=n.n(o),d=n(16530),m=n(95387),f=n(14748),p=n(80123),b=n(39173),y=n(99922),x=n(84564),E=n(45697),k=n.n(E),g=n(79886),v=function(e,t){var n=e.system,r=e.display_name;return i().createElement("a",{key:"system-title-".concat(t),href:"/insights/inventory/".concat(n)},r)};v.propTypes={system:k().string,display_name:k().node};var Z={title:"System name",props:{width:35},sortByProp:"display_name",renderExport:function(e){return e.display_name},renderFunc:(0,g.Rg)(v)},w={title:"Status",props:{width:20},sortByProp:"status",renderExport:function(e){return e.status}},O={title:"Message",props:{width:20},sortByProp:"message",renderExport:function(e){return e.message}},h=[Z,w,O];const S=[Z,w,O];var _=n(83237),j=[{type:_.Y.text,label:"System",filter:function(e,t){return e.filter((function(e){return e.display_name.toLowerCase().includes(t.toLowerCase())}))}}],P=[{type:_.Y.checkbox,label:"Status",filter:function(e,t){return e.filter((function(e){return t.includes(e.status.toLowerCase())}))},items:[{label:"Running",value:"running"},{label:"Success",value:"success"},{label:"Failure",value:"failure"},{label:"Timeout",value:"timeout"},{label:"Cancelled",value:"cancelled"}]}],C=n(58997),F=n(12117),I=n(45713),B=n(64600),D=n(11207),M=n(23690),T=n(67303);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const R=function(){var e,t=(0,d.useParams)().id,n=(0,o.useState)(C.iS),r=(0,l.Z)(n,2),c=r[0],E=r[1],k=(0,o.useState)(C.Pu),g=(0,l.Z)(k,2),v=g[0],Z=g[1],w=(0,o.useState)(),O=(0,l.Z)(w,2),_=O[0],H=O[1],R=(0,o.useState)(!1),A=(0,l.Z)(R,2),Y=A[0],J=A[1],K=(0,o.useState)([]),N=(0,l.Z)(K,2),Q=N[0],W=N[1],q=(0,o.useState)(!1),z=(0,l.Z)(q,2),G=z[0],U=z[1],V=(0,o.useState)(!1),X=(0,l.Z)(V,2),$=X[0],ee=X[1],te=(0,o.useState)(!1),ne=(0,l.Z)(te,2),re=ne[0],se=ne[1],ae=(0,d.useHistory)(),le=function(){var e=(0,a.Z)(u().mark((function e(){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.tQ)(t,H);case 2:if(n=e.sent,!Object.keys(n).length){e.next=12;break}return e.next=6,(0,T.n7)(n,H);case 6:if(!(r=e.sent).length){e.next=12;break}return e.next=10,E(n);case 10:return e.next=12,Z(r);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){le()}),[]),(0,o.useEffect)((function(){W((0,T.AC)(v))}),[v]),(0,o.useEffect)((0,a.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($&&(ae.push("/executed"),ee(!1)),!re){e.next=9;break}return e.next=4,E(C.iS);case 4:return e.next=6,Z(C.Pu);case 6:return e.next=8,le();case 8:se(!1);case 9:case"end":return e.stop()}}),e)}))),[re,$]),i().createElement("div",null,i().createElement(B.Z,{description:c.task_description,error:_,isOpen:Y,selectedSystems:Q,setModalOpened:J,slug:c.task_slug,title:c.task_title}),i().createElement(D.Z,{id:c.id,isOpen:G,setIsCancel:se,setIsDelete:ee,setModalOpened:U,startTime:c.start_time,status:c.status,title:c.task_title}),_?i().createElement(I.Z,{icon:x.ZP,color:"#c9190b",title:"Task cannot be displayed",text:C.eJ,error:"Error ".concat(null==_||null===(e=_.response)||void 0===e?void 0:e.status,": ").concat(null==_?void 0:_.message)}):i().createElement(i().Fragment,null,i().createElement(p.Z,null,i().createElement(y.Breadcrumb,{ouiaId:"completed-tasks-details-breadcrumb"},i().createElement(y.BreadcrumbItem,{to:"/beta/insights/tasks/executed"},"Tasks"),i().createElement(y.BreadcrumbItem,{isActive:!0},c.task_title)),i().createElement(y.Flex,{direction:{default:"column",md:"row"}},i().createElement(y.Flex,{direction:{default:"column"},flex:{default:"flex_1"}},i().createElement(y.FlexItem,null,i().createElement(b.Z,{title:c.task_title})),i().createElement(y.FlexItem,null,c.description)),i().createElement(F.Z,{data:c,flexContents:(0,C.HK)(c.task_slug,J,c.status,U),flexProps:C.Wb}))),i().createElement(f.Z,null,i().createElement(y.Card,null,i().createElement(y.Flex,{className:"completed-task-details-info-border",justifyContent:{default:"justifyContentSpaceBetween"},direction:{default:"column",md:"row"}},i().createElement(F.Z,{data:c,flexContents:C.MZ,flexProps:C.EM}))),i().createElement("br",null),i().createElement(y.Card,null,i().createElement(m.Z,{label:"".concat(c.id,"-completed-jobs"),ouiaId:"".concat(c.id,"-completed-jobs-table"),columns:S,items:v,filters:{filterConfig:[].concat((0,s.Z)(P),(0,s.Z)(j))},options:L(L({},C.t_),{},{exportable:L(L({},C.t_.exportable),{},{columns:h})}),emptyRows:(0,M.f)("jobs"),isStickyHeader:!0})))))}}}]);
//# sourceMappingURL=../sourcemaps/CompletedTaskDetails.4f1839d5f87ab6cfd12439121d03827d.js.map