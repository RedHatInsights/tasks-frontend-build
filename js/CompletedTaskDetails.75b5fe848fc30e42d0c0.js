"use strict";(self.webpackChunktasks_frontend=self.webpackChunktasks_frontend||[]).push([[292],{19694:(e,t,n)=>{t.RI={name:"ExclamationTriangleIcon",height:512,width:576,svgPath:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z",yOffset:0,xOffset:0},t.LP=n(35183).createIcon(t.RI),t.ZP=t.LP},31369:(e,t,n)=>{t.nQ={name:"InfoCircleIcon",height:512,width:512,svgPath:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z",yOffset:0,xOffset:0},t.uM=n(35183).createIcon(t.nQ),t.ZP=t.uM},77868:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ee});var r=n(4942),l=n(42982),a=n(15861),o=n(70885),c=n(64687),s=n.n(c),i=n(93264),u=n.n(i),m=n(62012),p=n(42019),d=n(89376),f=n(39173),y=n(63366),E=n(84564),v=n(45697),g=n.n(v),b=n(79886),h=function(e){var t=e.alert,n=e.content;return u().createElement(y.Split,null,t?u().createElement(u().Fragment,null,u().createElement(y.SplitItem,{style:{paddingRight:"8px"}},u().createElement(E.ZP,{color:"#C9190B"})),u().createElement(y.SplitItem,{style:{paddingRight:"16px"}},u().createElement("span",{style:{color:"#C9190B"}},"Alert"))):null,u().createElement(y.SplitItem,{color:"#A30000"},n))};h.propTypes={alert:g().bool,content:g().oneOfType([g().string,g().object])};const x=h;var Z=n(52033),O=n(55140),w=function(e,t){var n,r=e.system,l=e.display_name,a=(0,O.Z)();return l?(0,Z.d)(r,l,"system-title-".concat(t),null==a||null===(n=a.isBeta)||void 0===n?void 0:n.call(a)):u().createElement("span",{style:{color:"#72767B"}},"System deleted")};w.propTypes={system:g().string,display_name:g().node};var P={title:"System name",props:{width:30},sortByProp:"display_name",renderExport:function(e){return e.display_name||"System deleted"},renderFunc:(0,b.Rg)(w)},k={title:"Status",props:{width:10},sortByProp:"status",renderExport:function(e){return e.status}},_={title:"Message",props:{width:35},sortByFunction:function(e){return e.results.message},renderExport:function(e){return e.results.message},renderFunc:function(e,t,n){return u().createElement(x,{content:n.results.message,alert:n.results.alert||"Failure"===n.status||"Timeout"===n.status})}},j=[P,k,_];const S=[P,k,_];var T=n(83237),C=[{type:T.Y.text,label:"Name",filter:function(e,t){return e.filter((function(e){return e.display_name?e.display_name.toLowerCase().includes(t.toLowerCase()):null}))}}],I=[{type:T.Y.checkbox,label:"Status",filter:function(e,t){return e.filter((function(e){return t.includes(e.status.toLowerCase())}))},items:[{label:"Running",value:"running"},{label:"Success",value:"success"},{label:"Failure",value:"failure"},{label:"Timeout",value:"timeout"}]}],B=n(58997),F=n(12117),R=n(45713),D=n(64600),L=n(11207),M=n(23690),N=n(87462),A=n(45987),H=n(92397),z=["href"],G=["children"],J=function(e){var t=e.href,n=(0,A.Z)(e,z);return u().createElement(H.Z,(0,N.Z)({},n,{to:t}))};J.propTypes={href:g().string};var Q=function(e){var t=e.children,n=(0,A.Z)(e,G);return u().createElement(y.BreadcrumbItem,(0,N.Z)({},n,{component:J}),t)};Q.propTypes={children:g().node};const K=Q;var Y=n(67303),W=n(85333),q=n(43707),U=n(13678),V=n(19694),X=n(31369),$=function(e){var t=e.severity,n=e.title;return u().createElement("span",null,"info"===t?u().createElement("span",{style:{marginRight:"8px"}},u().createElement(X.ZP,{color:"#2B9AF3"})):"low"===t?u().createElement("span",{style:{marginRight:"8px"}},u().createElement(V.ZP,{color:"#F0AB00"})):"high"===t?u().createElement("span",{style:{marginRight:"8px"}},u().createElement(E.ZP,{color:"#C9190B"})):void 0,"info"===t?u().createElement("span",{style:{color:"#002952"}},u().createElement("strong",null,n)):"low"===t?u().createElement("span",{style:{color:"#795000"}},u().createElement("strong",null,n)):"high"===t?u().createElement("span",{style:{color:"#A30000"}},u().createElement("strong",null,n)):void 0)};$.propTypes={severity:g().string,title:g().string};const ee=$;var te=function(e){var t=e.color,n=e.icon,r=e.text;return u().createElement(y.Label,{color:t,icon:n,style:{marginTop:"16px",marginBottom:"4px"},className:"pf-m-compact"},r)};te.propTypes={color:g().string,icon:g().any,text:g().string};const ne=te;var re=function(e){var t=e.entry,n=t.detail,r=t.key,l=t.severity,a=t.summary,o=t.title,c=function(e,t){return u().createElement(y.Grid,{hasGutter:!0,className:"entry-detail-title"},u().createElement(y.GridItem,{span:2,className:"entry-detail-content"},e),u().createElement(y.GridItem,{xl2:5,xl:5,l:6,m:7,sm:8},"function"==typeof t?t():t))};return u().createElement(u().Fragment,null,u().createElement("div",null,"info"===l?u().createElement(ne,{color:"blue",icon:u().createElement(X.ZP,null),text:"Info"}):"low"===l?u().createElement(ne,{color:"orange",icon:u().createElement(V.ZP,null),text:"Low risk"}):"high"===l?u().createElement(ne,{color:"red",icon:u().createElement(E.ZP,null),text:"High risk"}):void 0),u().createElement("div",{className:"entry-title"},o),u().createElement("div",null,u().createElement(u().Fragment,null,c("Summary",a),null!=n&&n.remediations?c("Remediation",(function(){return n.remediations.map((function(e,t){var n="remediation-".concat(t);return u().createElement("div",{key:n},t>0?u().createElement("span",null,u().createElement("br",null)):null,u().createElement("span",{style:{fontFamily:"overpass-mono"}},"[",e.type,"] ",e.context))}))})):null,c("Key",r))))};re.propTypes={entry:g().object};const le=re;var ae=function(e,t){var n,r=[];return t?(n=function(e){return e.sort((function(e,t){return"high"===e.severity&&"high"!==t.severity||"low"===e.severity&&"info"===t.severity?-1:"high"===t.severity&&"high"!==e.severity||"low"===t.severity&&"info"===e.severity?1:0}))}(e),r=n.map((function(e){return{parent:u().createElement(ee,{severity:e.severity,title:e.title}),child:u().createElement(le,{entry:e})}}))):r=(n=e)[0],r},oe=n(37015);function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie=function(e){var t,n=e.rowPairs,l=e.isReportJson,a=0,c=(0,i.useState)(Object.fromEntries(Object.entries(n).map((function(e){return[(0,o.Z)(e,1)[0],Boolean(!1)]})))),s=(0,o.Z)(c,2),m=s[0],p=s[1],d=function(e,t){p(se(se({},m),{},(0,r.Z)({},t,!m[t])))};return l?n.map((function(e,t){return u().createElement(u().Fragment,{key:t},function(e,t){var n=u().createElement(U.Tr,{key:a},u().createElement(U.Td,{expand:{rowIndex:t,isExpanded:m[t],onToggle:d}}),u().createElement(U.Td,null,e));return a+=1,n}(e.parent,t),function(e,t){var n=u().createElement(U.Tr,{className:!0===m[t]?"pf-m-expanded":null,key:a,isExpanded:!0===m[t]},u().createElement(U.Td,null),u().createElement(U.Td,null,e));return a+=1,n}(e.child,t))})):u().createElement(y.CodeBlock,{style:(t={},(0,r.Z)(t,oe.c_code_block__header_BorderBottomColor.name,oe.global_palette_white),(0,r.Z)(t,"backgroundColor","#ffffff"),t)},u().createElement(y.CodeBlockCode,null,n))};ie.propTypes={isReportJson:g().bool,rowPairs:g().array};const ue=ie;var me=function(e){var t=e.item,n=!!t.results.report_json,r=t.results.report_json?ae(t.results.report_json.entries,n):ae([t.results.report],n);return u().createElement("div",null,u().createElement(U.TableComposable,{variant:"compact",style:{marginBottom:"30px","--pf-c-table__expandable-row--after--border-width--base":"0"}},u().createElement(U.Tbody,null,u().createElement(ue,{rowPairs:r,isReportJson:n}))))};me.propTypes={item:g().object};const pe=me;var de=n(98773);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ee=function(){var e,t=(0,m.useParams)().id,n=(0,i.useState)(B.iS),r=(0,o.Z)(n,2),c=r[0],v=r[1],g=(0,i.useState)(B.Pu),b=(0,o.Z)(g,2),h=b[0],x=b[1],Z=(0,i.useState)(!0),w=(0,o.Z)(Z,2),P=w[0],k=w[1],_=(0,i.useState)(),T=(0,o.Z)(_,2),N=T[0],A=T[1],H=(0,i.useState)(!1),z=(0,o.Z)(H,2),G=z[0],J=z[1],Q=(0,i.useState)([]),U=(0,o.Z)(Q,2),V=U[0],X=U[1],$=(0,i.useState)(!1),ee=(0,o.Z)($,2),te=ee[0],ne=ee[1],re=(0,i.useState)(!1),le=(0,o.Z)(re,2),ae=le[0],oe=le[1],ce=(0,i.useState)(!1),se=(0,o.Z)(ce,2),ie=se[0],ue=se[1],me=(0,O.Z)(),fe=(0,q.TE)("inventory",["inventory:hosts:*","inventory:hosts:read"]),Ee=fe.hasAccess,ve=fe.isLoading,ge=(0,de.Z)(),be=function(){var e=(0,a.Z)(s().mark((function e(){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.next=3,v(B.iS);case 3:return e.next=5,x(B.Pu);case 5:return e.next=7,(0,Y.tQ)(t,A);case 7:if(n=e.sent,!Object.keys(n).length){e.next=17;break}return e.next=11,(0,Y.n7)(n,A);case 11:if(!(r=e.sent).length){e.next=17;break}return e.next=15,v(n);case 15:return e.next=17,x(r);case 17:k(!1);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){be()}),[t]),(0,i.useEffect)((function(){c&&me.updateDocumentTitle("".concat(c.task_title," - Tasks | Red Hat Insights"))}),[me,c]),(0,i.useEffect)((function(){X((0,Y.AC)(h))}),[h]),(0,i.useEffect)((function(){ae&&(ge("/executed"),oe(!1)),ie&&(be(),ue(!1))}),[ie,ae]),u().createElement("div",null,u().createElement(D.Z,{description:c.task_description,error:N,isOpen:G,selectedSystems:V,setModalOpened:J,slug:c.task_slug,title:c.task_title}),u().createElement(L.Z,{id:c.id,isOpen:te,setIsCancel:ue,setIsDelete:oe,setModalOpened:ne,startTime:c.start_time,status:c.status,title:c.task_title}),N?u().createElement(R.Z,{icon:E.ZP,color:"#c9190b",title:"Task cannot be displayed",text:B.eJ,error:"Error ".concat(null==N||null===(e=N.response)||void 0===e?void 0:e.status,": ").concat(null==N?void 0:N.message)}):u().createElement(u().Fragment,null,u().createElement(d.Z,null,u().createElement(y.Breadcrumb,{ouiaId:"completed-tasks-details-breadcrumb"},u().createElement(K,{to:"/executed"},"Tasks"),u().createElement(y.BreadcrumbItem,{isActive:!0},c.task_title)),u().createElement(y.Flex,{direction:{default:"column",md:"row"}},u().createElement(y.Flex,{direction:{default:"column"},flex:{default:"flex_1"}},u().createElement(y.FlexItem,null,u().createElement(f.Z,{title:c.task_title})),u().createElement(y.FlexItem,null,c.task_description)),u().createElement(F.Z,{data:c,flexContents:(0,B.HK)(c.task_slug,J,c.status,ne),flexProps:B.Wb}))),u().createElement("section",{className:"pf-l-page__main-section pf-c-page__main-section"},u().createElement(y.Card,null,u().createElement(y.Flex,{className:"completed-task-details-info-border",justifyContent:{default:"justifyContentSpaceBetween"},direction:{default:"column",md:"row"}},u().createElement(F.Z,{data:c,flexContents:B.MZ,flexProps:B.EM}))),u().createElement("br",null),u().createElement(y.Card,null,!ve&&Ee?u().createElement(p.Z,{label:"".concat(c.id,"-completed-jobs"),ouiaId:"".concat(c.id,"-completed-jobs-table"),columns:S,items:h,filters:{filterConfig:[].concat((0,l.Z)(C),(0,l.Z)(I))},options:ye(ye({},B.t_),{},{exportable:ye(ye({},B.t_.exportable),{},{columns:j}),detailsComponent:h.some((function(e){return(0,Y.HH)(e)}))?pe:void 0}),emptyRows:(0,M.f)("jobs"),isStickyHeader:!0,isTableLoading:P}):u().createElement(W.Z,{serviceName:"Inventory"})))))}}}]);
//# sourceMappingURL=../sourcemaps/CompletedTaskDetails.021c9fd76c4a85bf68623c253e6842a7.js.map