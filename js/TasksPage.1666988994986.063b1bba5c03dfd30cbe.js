"use strict";(self.webpackChunktasks_frontend=self.webpackChunktasks_frontend||[]).push([[550],{2112:(e,t,n)=>{t.MS={name:"WrenchIcon",height:512,width:512,svgPath:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z",yOffset:0,xOffset:0},t.R0=n(35183).createIcon(t.MS),t.ZP=t.R0},824:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ne});var r=n(15861),a=n(70885),s=n(87757),c=n.n(s),l=n(93264),o=n.n(l),i=n(45697),u=n.n(i),p=n(16530),d=n(99922),f=n(14748),m=n(80123),b=function(e){var t=e.className,n=e.tabIndex,r=e.tabsList,a=e.updateTab;return o().createElement(d.Tabs,{className:t,activeKey:n,onSelect:a},r.map((function(e,t){return o().createElement(d.Tab,{id:"tabs-page-".concat(t),key:"tabs-page-".concat(t),eventKey:t,title:o().createElement(d.TabTitleText,null,e)})})))};b.propTypes={className:u().string,tabIndex:u().number,tabsList:u().array,updateTab:u().func};const v=b;var k=n(64600),y=n(58997),E=n(12117),x=n(57318),Z=function(e){return e.content},g=function(e,t){return e.find((function(e){return e.props.type===t}))},h=function(e){var t=e.children,n=e.cardClass;return Array.isArray(t)||(t=[t]),o().createElement(d.Card,{className:n},o().createElement(d.CardTitle,{className:g(t,"title").props.className},g(t,"title")),o().createElement(d.CardBody,{className:g(t,"body").props.className},g(t,"body")),o().createElement(d.CardFooter,{className:g(t,"footer").props.className},g(t,"footer")))};h.propTypes={children:u().any,cardClass:u().string};const w=h;var S=n(35664),T=n(46808),_=n(45713),O=n(84564),C=function(e){var t,n=e.availableTasks,r=e.error,a=e.openTaskModal;return o().createElement("div",{"aria-label":"available-tasks-table"},r?o().createElement(_.Z,{icon:O.ZP,color:"#c9190b",title:"Available tasks cannot be displayed",text:y.Rl,error:"Error ".concat(null==r||null===(t=r.response)||void 0===t?void 0:t.status,": ").concat(null==r?void 0:r.message)}):null!=n&&n.length?null==n?void 0:n.map((function(e){return o().createElement(o().Fragment,{"aria-label":e.title,key:e.title},o().createElement(w,null,o().createElement(Z,{content:e.title,type:"title"}),o().createElement(Z,{className:"card-task-description",content:e.description,type:"body"}),o().createElement(Z,{content:o().createElement(d.Flex,{direction:{default:"column"}},o().createElement(d.FlexItem,null,o().createElement("a",{href:"".concat(y.WP).concat(y.Hu,"/").concat(e.slug,"/playbook")},"Download preview of playbook")),o().createElement(d.FlexItem,null,o().createElement(T.Z,{slug:e.slug,isFirst:!0,variant:"primary",openTaskModal:a}))),type:"footer"})),o().createElement("br",null))})):o().createElement(_.Z,{title:y.kL,text:y.Fd}))};C.propTypes={availableTasks:u().array,error:u().object,openTaskModal:u().func};const P=C;var j=n(65811),M=n(67303),N=function(){var e=y.LP;return null==e?void 0:e.map((function(e,t){return o().createElement(o().Fragment,{key:"loading-".concat(t)},o().createElement(w,null,o().createElement(Z,{content:o().createElement(S.Z,{size:S.i.md}),type:"title"}),o().createElement(Z,{content:o().createElement(S.Z,{size:S.i.md}),type:"body"}),o().createElement(Z,{content:o().createElement(S.Z,{size:S.i.md}),type:"footer"})),o().createElement("br",null))}))},F=function(e){var t=e.openTaskModal,n=(0,l.useState)([]),s=(0,a.Z)(n,2),i=s[0],u=s[1],p=(0,l.useState)(!1),d=(0,a.Z)(p,2),f=d[0],m=d[1],b=(0,l.useState)(),v=(0,a.Z)(b,2),k=v[0],y=v[1],E=function(e){(0,M.VZ)(e)?(y(e),(0,j.q)({variant:"danger",title:"Error",description:e.message,dismissable:!0,autoDismiss:!1})):u(e.data),m(!1)};return(0,l.useEffect)((function(){var e=function(){var e=(0,r.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,(0,x.Cj)();case 3:t=e.sent,E(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),o().createElement("div",{"aria-label":"available-tasks"},f?o().createElement(N,null):o().createElement(P,{availableTasks:i,error:k,openTaskModal:t}))};F.propTypes={openTaskModal:u().func};const I=F;var L=n(4942),R=n(42982),D=n(2112),A=n(79886),z=function(e,t){var n=e.id,r=e.task_title;return o().createElement(p.Link,{key:"task-title-".concat(t),to:"/executed/".concat(n)},r)};z.propTypes={id:u().number,task_title:u().any,index:u().number};var B={title:"Task",props:{width:35},sortByProp:"task_title",renderExport:function(e){return e.task_title},renderFunc:(0,A.Rg)(z)},W={title:"Systems",props:{width:20},sortByProp:"systems_count",renderExport:function(e){return e.systems_count}},q={title:"Run date/time",props:{width:20},sortByProp:"end_time",renderExport:function(e){return e.run_date_time},renderFunc:function(e,t,n){return n.run_date_time}},H=[B,W,q];const G=[B,W,q];var K=n(83237),V=[{type:K.Y.text,label:"Task",filter:function(e,t){return e.filter((function(e){return e.task_title.toLowerCase().includes(t.toLowerCase())}))}}],Y=[{type:K.Y.checkbox,label:"Status",filter:function(e,t){return e.filter((function(e){return t.includes(e.status.toLowerCase())}))},items:[{label:"Completed",value:"completed"},{label:"Running",value:"running"}]}],J=n(23690),Q=n(42019),U=n(11207);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){(0,L.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ee=function(){var e,t=(0,l.useState)(y.vg),n=(0,a.Z)(t,2),s=n[0],i=n[1],u=(0,l.useState)(y.LG),p=(0,a.Z)(u,2),d=p[0],f=p[1],m=(0,l.useState)(!0),b=(0,a.Z)(m,2),v=b[0],E=b[1],Z=(0,l.useState)(),g=(0,a.Z)(Z,2),h=g[0],w=g[1],S=(0,l.useState)(),T=(0,a.Z)(S,2),C=T[0],P=T[1],j=(0,l.useState)(!1),N=(0,a.Z)(j,2),F=N[0],I=N[1],L=(0,l.useState)(!1),z=(0,a.Z)(L,2),B=z[0],W=z[1],q=(0,l.useState)(!1),K=(0,a.Z)(q,2),X=K[0],ee=K[1],te=(0,l.useState)(!1),ne=(0,a.Z)(te,2),re=ne[0],ae=ne[1],se=(0,l.useState)({}),ce=(0,a.Z)(se,2),le=ce[0],oe=ce[1],ie=(0,l.useState)(!1),ue=(0,a.Z)(ie,2),pe=ue[0],de=ue[1],fe=(0,l.useState)([]),me=(0,a.Z)(fe,2),be=me[0],ve=me[1],ke=function(){var e=(0,r.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(),de(!0),e.next=4,(0,M.tQ)(t,P);case 4:if(n=e.sent,!(Object.keys(n).length>0)){e.next=15;break}return e.next=8,(0,M.n7)(n,P);case 8:if(!(r=e.sent).length){e.next=13;break}return ve((0,M.AC)(r)),e.next=13,f(n);case 13:e.next=18;break;case 15:return de(!1),e.next=18,f({});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=(0,r.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,(0,x.nW)("?limit=1000&offset=0");case 3:t=e.sent,Ze(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=(0,r.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(t);case 2:ae(!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(e,t){var n=function(e,t){e(t)};return function(r){return[{title:"Run this task again",onClick:function(e,r,a){return n(t,a.task.title.props.id)}},{title:"Delete",isDisabled:"Completed"!==r.task.title.props.status,onClick:function(t,r,a){n(e,a.task.title.props)}}]}}(Ee,ke),Ze=function(){var e=(0,r.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,M.VZ)(t)){e.next=5;break}(0,M.sc)(t),w(t),e.next=9;break;case 5:return null==t||null===(n=t.data)||void 0===n||n.map((function(e){return"Completed"===e.status?e.run_date_time=(0,A.Ws)(e.end_time):e.run_date_time=e.status})),e.next=8,i(t.data);case 8:E(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,i(y.vg);case 3:ye();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){ye()}),[]),(0,l.useEffect)((0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F&&!B){e.next=7;break}return e.next=3,ge();case 3:I(!1),W(!1),e.next=11;break;case 7:if(!X){e.next=11;break}return e.next=10,ge();case 10:ee(!1);case 11:case"end":return e.stop()}}),e)}))),[B,F,X]),o().createElement(o().Fragment,null,o().createElement(k.Z,{description:d.task_description,error:C,isOpen:pe,selectedSystems:be,setIsRunTaskAgain:ee,setModalOpened:de,slug:d.task_slug,title:d.task_title}),o().createElement(U.Z,{id:le.id,isOpen:re,setIsCancel:W,setIsDelete:I,setModalOpened:ae,startTime:le.start_time,status:le.status,title:le.task_title}),o().createElement("div",{"aria-label":"activity"},h?o().createElement(_.Z,{icon:O.ZP,color:"#c9190b",title:"Activities cannot be displayed",text:y.Nq,error:"Error ".concat(null==h||null===(e=h.response)||void 0===e?void 0:e.status,": ").concat(null==h?void 0:h.message)}):0===(null==s?void 0:s.length)?o().createElement(_.Z,{icon:D.ZP,color:"#6a6e73",title:y.Uo,text:y.R_}):o().createElement(Q.Z,{label:"activity-table",ouiaId:"activity-table",columns:G,items:s,filters:{filterConfig:[].concat((0,R.Z)(V),(0,R.Z)(Y))},options:$($($({},y.t_),y.pN),{},{actionResolver:xe,exportable:$($({},y.t_.exportable),{},{columns:H})}),emptyRows:(0,J.f)("tasks"),isStickyHeader:!0,isTableLoading:v})))};var te=function(e){var t=e.tab,n=(0,p.useHistory)(),s=(0,l.useState)(t),i=(0,a.Z)(s,2),u=i[0],b=i[1],Z=(0,l.useState)(!1),g=(0,a.Z)(Z,2),h=g[0],w=g[1],S=(0,l.useState)({}),T=(0,a.Z)(S,2),_=T[0],O=T[1],C=(0,l.useState)(),P=(0,a.Z)(C,2),M=P[0],N=P[1];(0,l.useEffect)((function(){0===t&&n.push("available")}),[]);var F=function(){var e=(0,r.Z)(c().mark((function e(t,n){var r,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.Sl)(n);case 2:null!=(s=e.sent)&&null!==(r=s.response)&&void 0!==r&&r.status&&200!==(null==s||null===(a=s.response)||void 0===a?void 0:a.status)?(N(s),(0,j.q)({variant:"danger",title:"Error",description:s.message,dismissable:!0,autoDismiss:!1})):O(s),w(t);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return o().createElement(o().Fragment,null,o().createElement(k.Z,{description:_.description,error:M,isOpen:h,selectedSystems:[],setModalOpened:w,slug:_.slug,title:_.title}),o().createElement(m.Z,null,o().createElement(E.Z,{flexContents:y.j7,flexProps:y.Jc})),o().createElement(v,{className:"tabs-background",tabIndex:u,updateTab:function(e,t){n.push(t?"executed":"available"),b(t)},tabsList:y.EZ}),o().createElement(f.Z,null,o().createElement(d.Stack,{hasGutter:!0},o().createElement(d.StackItem,null,0===u?o().createElement(I,{openTaskModal:F}):o().createElement(ee,{openTaskModal:F})))))};te.propTypes={tab:u().number};const ne=te}}]);