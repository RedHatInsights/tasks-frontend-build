"use strict";(self.webpackChunktasks_frontend=self.webpackChunktasks_frontend||[]).push([[292],{19694:(e,t,r)=>{t.RI={name:"ExclamationTriangleIcon",height:512,width:576,svgPath:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z",yOffset:0,xOffset:0},t.LP=r(35183).createIcon(t.RI),t.ZP=t.LP},31369:(e,t,r)=>{t.nQ={name:"InfoCircleIcon",height:512,width:512,svgPath:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z",yOffset:0,xOffset:0},t.uM=r(35183).createIcon(t.nQ),t.ZP=t.uM},19545:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ge});var n=r(4942),o=r(42982),l=r(87462),a=r(15861),i=r(70885),s=r(64687),c=r.n(s),u=r(93264),m=r.n(u),p=r(62012),d=r(42019),v=r(89376),y=r(39173),f=r(63366),E=r(84564),g=r(45697),C=r.n(g),b=r(79886),x=function(e){var t=e.alert,r=e.content;return m().createElement(f.Split,null,t?m().createElement(m().Fragment,null,m().createElement(f.SplitItem,{style:{paddingRight:"8px"}},m().createElement(E.ZP,{color:"#C9190B"})),m().createElement(f.SplitItem,{style:{paddingRight:"16px"}},m().createElement("span",{style:{color:"#C9190B"}},"Alert"))):null,m().createElement(f.SplitItem,{color:"#A30000"},r))};x.propTypes={alert:C().bool,content:C().oneOfType([C().string,C().object])};const h=x;var Z=r(52033),k=r(55140),P=function(e,t){var r,n=e.system,o=e.display_name,l=(0,k.Z)();return o?(0,Z.d)(n,o,"system-title-".concat(t),null==l||null===(r=l.isBeta)||void 0===r?void 0:r.call(l)):m().createElement("span",{style:{color:"#72767B"}},"System deleted")};P.propTypes={system:C().string,display_name:C().node};var w={title:"System name",props:{width:30},sortByProp:"display_name",renderExport:function(e){return e.display_name||"System deleted"},renderFunc:(0,b.Rg)(P)},O={title:"Status",props:{width:10},sortByProp:"status",renderExport:function(e){return e.status}},L={title:"Message",props:{width:35},sortByFunction:function(e){return e.results.message},renderExport:function(e){return e.results.message},renderFunc:function(e,t,r){return m().createElement(h,{content:r.results.message,alert:r.results.alert||"Failure"===r.status||"Timeout"===r.status})}},S=[w,O,L];const B=[w,O,L];var j=r(83237),_=[{type:j.Y.text,label:"Name",filter:function(e,t){return e.filter((function(e){return e.display_name?e.display_name.toLowerCase().includes(t.toLowerCase()):null}))}}],T=[{type:j.Y.checkbox,label:"Status",filter:function(e,t){return e.filter((function(e){return t.includes(e.status.toLowerCase())}))},items:[{label:"Running",value:"running"},{label:"Success",value:"success"},{label:"Failure",value:"failure"},{label:"Timeout",value:"timeout"}]}],I=r(58997),F=r(12117),M=r(45713),A=r(64600),R=r(11207),D=r(23690),H=r(45987),N=r(92397),z=["href"],G=["children"],J=function(e){var t=e.href,r=(0,H.Z)(e,z);return m().createElement(N.Z,(0,l.Z)({},r,{to:t}))};J.propTypes={href:C().string};var Q=function(e){var t=e.children,r=(0,H.Z)(e,G);return m().createElement(f.BreadcrumbItem,(0,l.Z)({},r,{component:J}),t)};Q.propTypes={children:C().node};const W=Q;var K=r(67303),Y=r(85333),V=r(43707),q=r(13678),U=r(19694),X=r(31369);const $={converttorhelpreanalysisSeverityMap:{error:{text:"Inhibitor",icon:m().createElement(E.ZP,{color:"#C9190B"}),titleColor:"#A30000",severityColor:"red",severityLevel:2500},overridable:{text:"Overridable",icon:m().createElement(E.ZP,{color:"#C9190B"}),titleColor:"#A30000",severityColor:"red",severityLevel:2e3},skip:{text:"Skipped",icon:m().createElement(E.ZP,{color:"#C9190B"}),titleColor:"#A30000",severityColor:"red",severityLevel:1500},warning:{text:"Warning",icon:m().createElement(U.ZP,{color:"#F0AB00"}),titleColor:"#795000",severityColor:"orange",severityLevel:1e3},info:{text:"Info",icon:m().createElement(X.ZP,{color:"#2B9AF3"}),titleColor:"#002952",severityColor:"blue",severityLevel:500}},converttorhelpreanalysisstageSeverityMap:{error:{text:"Inhibitor",icon:m().createElement(E.ZP,{color:"#C9190B"}),titleColor:"#A30000",severityColor:"red",severityLevel:2500},overridable:{text:"Overridable",icon:m().createElement(E.ZP,{color:"#C9190B"}),titleColor:"#A30000",severityColor:"red",severityLevel:2e3},skip:{text:"Skipped",icon:m().createElement(E.ZP,{color:"#C9190B"}),titleColor:"#A30000",severityColor:"red",severityLevel:1500},warning:{text:"Warning",icon:m().createElement(U.ZP,{color:"#F0AB00"}),titleColor:"#795000",severityColor:"orange",severityLevel:1e3},info:{text:"Info",icon:m().createElement(X.ZP,{color:"#2B9AF3"}),titleColor:"#002952",severityColor:"blue",severityLevel:500}},leapppreupgradeSeverityMap:{high:{text:"High risk",icon:m().createElement(E.ZP,{color:"#C9190B"}),titleColor:"#A30000",severityColor:"red",severityLevel:2e3},medium:{text:"Medium risk",icon:m().createElement(U.ZP,{color:"#F0AB00"}),titleColor:"#795000",severityColor:"orange",severityLevel:1500},low:{text:"Low risk",icon:m().createElement(U.ZP,{color:"#F0AB00"}),titleColor:"#795000",severityColor:"orange",severityLevel:1e3},info:{text:"Info",icon:m().createElement(X.ZP,{color:"#2B9AF3"}),titleColor:"#002952",severityColor:"blue",severityLevel:500}},leappupgradeSeverityMap:{high:{text:"High risk",icon:m().createElement(E.ZP,{color:"#C9190B"}),titleColor:"#A30000",severityColor:"red",severityLevel:2e3},medium:{text:"Medium risk",icon:m().createElement(U.ZP,{color:"#F0AB00"}),titleColor:"#795000",severityColor:"orange",severityLevel:1500},low:{text:"Low risk",icon:m().createElement(U.ZP,{color:"#F0AB00"}),titleColor:"#795000",severityColor:"orange",severityLevel:1e3},info:{text:"Info",icon:m().createElement(X.ZP,{color:"#2B9AF3"}),titleColor:"#002952",severityColor:"blue",severityLevel:500}},leappupgradestageSeverityMap:{high:{text:"High risk",icon:m().createElement(E.ZP,{color:"#C9190B"}),titleColor:"#A30000",severityColor:"red",severityLevel:2e3},medium:{text:"Medium risk",icon:m().createElement(U.ZP,{color:"#F0AB00"}),titleColor:"#795000",severityColor:"orange",severityLevel:1500},low:{text:"Low risk",icon:m().createElement(U.ZP,{color:"#F0AB00"}),titleColor:"#795000",severityColor:"orange",severityLevel:1e3},info:{text:"Info",icon:m().createElement(X.ZP,{color:"#2B9AF3"}),titleColor:"#002952",severityColor:"blue",severityLevel:500}}};var ee=function(e){var t=e.severity,r=e.taskConstantMapper,n=e.title;return m().createElement("span",null,m().createElement("span",{style:{marginRight:"8px"}},$[r][t.toLowerCase()].icon),m().createElement("span",{style:{color:$[r][t.toLowerCase()].titleColor}},m().createElement("strong",null,n)))};ee.propTypes={severity:C().string,taskConstantMapper:C().string,title:C().string};const te=ee;var re=function(e){var t=e.color,r=e.icon,n=e.text;return m().createElement(f.Label,{color:t,icon:r,style:{marginTop:"16px",marginBottom:"4px"},className:"pf-m-compact"},n)};re.propTypes={color:C().string,icon:C().any,text:C().string};const ne=re;var oe=function(e){var t,r,n=e.entry,o=e.taskConstantMapper,l=n.detail,a=n.key,i=n.severity,s=n.summary,c=n.title,u=function(e,t){return m().createElement(f.Grid,{hasGutter:!0,className:"entry-detail-title"},m().createElement(f.GridItem,{span:2,className:"entry-detail-content"},e),m().createElement(f.GridItem,{xl2:5,xl:5,l:6,m:7,sm:8,style:{whiteSpace:"pre-line"}},"function"==typeof t?t():t))};return m().createElement(m().Fragment,null,m().createElement("div",null,m().createElement(ne,{color:$[o][i.toLowerCase()].severityColor,icon:$[o][i.toLowerCase()].icon,text:$[o][i.toLowerCase()].text})),m().createElement("div",{className:"entry-title"},c),m().createElement("div",null,m().createElement(m().Fragment,null,u("Summary",s),null!=l&&null!==(t=l.diagnosis)&&void 0!==t&&t.context?u("Diagnosis",(function(){return m().createElement("div",null,m().createElement("span",null,l.diagnosis.context))})):null,null!=l&&l.remediations&&""!==(null==l||null===(r=l.remediations[0])||void 0===r?void 0:r.context)?u("Remediation",(function(){return l.remediations.map((function(e,t){var r="remediation-".concat(t);return m().createElement("div",{key:r},t>0?m().createElement("span",null,m().createElement("br",null)):null,m().createElement("span",{style:{fontFamily:"overpass-mono"}},e.type?"[".concat(e.type,"] ").concat(e.context):"".concat(e.context)))}))})):null,u("Key",a))))};oe.propTypes={entry:C().object,taskConstantMapper:C().string};const le=oe;var ae=function(e,t,r){var n,o=r.toLowerCase().replace(/-/g,""),l=[];return t?(n=function(e,t){return e.sort((function(e,r){var n=$[t][e.severity.toLowerCase()].severityLevel,o=$[t][r.severity.toLowerCase()].severityLevel;return n>o?-1:o>n?1:0}))}(e,"".concat(o,"SeverityMap")),n.forEach((function(e){l.push({parent:m().createElement(te,{severity:e.severity,title:e.title,taskConstantMapper:"".concat(o,"SeverityMap")}),child:m().createElement(le,{entry:e,taskConstantMapper:"".concat(o,"SeverityMap")})})}))):l=(n=e)[0],l},ie=r(37015);function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ue=function(e){var t,r=e.rowPairs,o=e.isReportJson,l=0,a=(0,u.useState)(Object.fromEntries(Object.entries(r).map((function(e){return[(0,i.Z)(e,1)[0],Boolean(!1)]})))),s=(0,i.Z)(a,2),c=s[0],p=s[1],d=function(e,t){p(ce(ce({},c),{},(0,n.Z)({},t,!c[t])))};return o?r.map((function(e,t){return m().createElement(m().Fragment,{key:t},function(e,t){var r=m().createElement(q.Tr,{key:l},m().createElement(q.Td,{expand:{rowIndex:t,isExpanded:c[t],onToggle:d}}),m().createElement(q.Td,null,e));return l+=1,r}(e.parent,t),function(e,t){var r=m().createElement(q.Tr,{className:!0===c[t]?"pf-m-expanded":null,key:l,isExpanded:!0===c[t]},m().createElement(q.Td,null),m().createElement(q.Td,null,e));return l+=1,r}(e.child,t))})):m().createElement(f.CodeBlock,{style:(t={},(0,n.Z)(t,ie.c_code_block__header_BorderBottomColor.name,ie.global_palette_white),(0,n.Z)(t,"backgroundColor","#ffffff"),t)},m().createElement(f.CodeBlockCode,null,r))};ue.propTypes={isReportJson:C().bool,rowPairs:C().array};const me=ue;var pe=function(e){var t=e.taskSlug,r=e.item,n=!!r.results.report_json,o=r.results.report_json?ae(r.results.report_json.entries,n,t):ae([r.results.report],n,t);return m().createElement("div",null,m().createElement(q.TableComposable,{variant:"compact",style:{marginBottom:"30px","--pf-c-table__expandable-row--after--border-width--base":"0"}},m().createElement(q.Tbody,null,m().createElement(me,{rowPairs:o,isReportJson:n}))))};pe.propTypes={item:C().object,taskSlug:C().string};const de=pe;var ve=r(98773),ye=r(79114);function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ge=function(){var e,t=(0,p.useParams)().id,r=(0,u.useState)(I.iS),n=(0,i.Z)(r,2),s=n[0],g=n[1],C=(0,u.useState)(I.Pu),b=(0,i.Z)(C,2),x=b[0],h=b[1],Z=(0,u.useState)(!0),P=(0,i.Z)(Z,2),w=P[0],O=P[1],L=(0,u.useState)(),j=(0,i.Z)(L,2),H=j[0],N=j[1],z=(0,u.useState)(!1),G=(0,i.Z)(z,2),J=G[0],Q=G[1],q=(0,u.useState)([]),U=(0,i.Z)(q,2),X=U[0],$=U[1],ee=(0,u.useState)(!1),te=(0,i.Z)(ee,2),re=te[0],ne=te[1],oe=(0,u.useState)(!1),le=(0,i.Z)(oe,2),ae=le[0],ie=le[1],se=(0,u.useState)(!1),ce=(0,i.Z)(se,2),ue=ce[0],me=ce[1],pe=(0,k.Z)(),fe=(0,V.TE)("inventory",["inventory:hosts:*","inventory:hosts:read"]),ge=fe.hasAccess,Ce=fe.isLoading,be=(0,ve.Z)(),xe=function(){var e=(0,a.Z)(c().mark((function e(){var r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,g(I.iS);case 3:return e.next=5,h(I.Pu);case 5:return e.next=7,(0,K.tQ)(t,N);case 7:if(r=e.sent,!Object.keys(r).length){e.next=17;break}return e.next=11,(0,K.n7)(r,N);case 11:if(!(n=e.sent).length){e.next=17;break}return e.next=15,g(r);case 15:return e.next=17,h(n);case 17:O(!1);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){xe()}),[t]),(0,u.useEffect)((function(){s&&pe.updateDocumentTitle("".concat(s.name," - Tasks | Red Hat Insights"))}),[pe,s]),(0,u.useEffect)((function(){$((0,K.AC)(x))}),[x]),(0,u.useEffect)((function(){ae&&(be("/executed"),ie(!1)),ue&&(xe(),me(!1))}),[ue,ae]);var he=(0,u.useMemo)((function(){return function(e){return m().createElement(de,(0,l.Z)({taskSlug:s.task_slug},e))}}),[x]);return m().createElement("div",null,m().createElement(A.Z,{description:s.task_description,error:H,isOpen:J,selectedSystems:X,setModalOpened:Q,slug:s.task_slug,title:s.name,name:s.name}),m().createElement(R.Z,{id:s.id,isOpen:re,setIsCancel:me,setIsDelete:ie,setModalOpened:ne,startTime:s.start_time,status:s.status,title:s.name}),H?m().createElement(M.Z,{icon:E.ZP,color:"#c9190b",title:"Task cannot be displayed",text:I.eJ,error:"Error ".concat(null==H||null===(e=H.response)||void 0===e?void 0:e.status,": ").concat(null==H?void 0:H.message)}):m().createElement(m().Fragment,null,m().createElement(v.Z,null,m().createElement(f.Breadcrumb,{ouiaId:"completed-tasks-details-breadcrumb"},m().createElement(W,{to:"/executed"},"Tasks"),m().createElement(f.BreadcrumbItem,{isActive:!0},s.name)),m().createElement(f.Flex,{direction:{default:"column",md:"row"}},m().createElement(f.Flex,{direction:{default:"column"},flex:{default:"flex_1"}},m().createElement(f.FlexItem,null,m().createElement(y.Z,{title:s.name}),m().createElement(f.TextContent,null,m().createElement(f.Text,{component:f.TextVariants.small},s.task_title))),m().createElement(f.FlexItem,null,m().createElement(ye.D,null,s.task_description))),m().createElement(F.Z,{data:s,flexContents:(0,I.HK)(s.task_slug,Q,s.status,ne),flexProps:I.Wb}))),m().createElement("section",{className:"pf-l-page__main-section pf-c-page__main-section"},m().createElement(f.Card,null,m().createElement(f.Flex,{className:"completed-task-details-info-border",justifyContent:{default:"justifyContentSpaceBetween"},direction:{default:"column",md:"row"}},m().createElement(F.Z,{data:s,flexContents:I.MZ,flexProps:I.EM}))),m().createElement("br",null),m().createElement(f.Card,null,!Ce&&ge?m().createElement(d.Z,{label:"".concat(s.id,"-completed-jobs"),ouiaId:"".concat(s.id,"-completed-jobs-table"),columns:B,items:x,filters:{filterConfig:[].concat((0,o.Z)(_),(0,o.Z)(T))},options:Ee(Ee({},I.t_),{},{exportable:Ee(Ee({},I.t_.exportable),{},{columns:S}),detailsComponent:x.some((function(e){return(0,K.HH)(e)}))?he:void 0}),emptyRows:(0,D.f)("jobs"),isStickyHeader:!0,isTableLoading:w}):m().createElement(Y.Z,{serviceName:"Inventory"})))))}}}]);
//# sourceMappingURL=../sourcemaps/CompletedTaskDetails.1a3751740711031942ed9caad5a3ba9e.js.map