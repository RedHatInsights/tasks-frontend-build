"use strict";(self.webpackChunktasks_frontend=self.webpackChunktasks_frontend||[]).push([[550],{84564:(e,t,n)=>{t.MX={name:"ExclamationCircleIcon",height:512,width:512,svgPath:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z",yOffset:0,xOffset:0},t.$O=n(35183).createIcon(t.MX),t.ZP=t.$O},57287:(e,t,n)=>{n.r(t),n.d(t,{default:()=>we});var r={};n.r(r),n.d(r,{nameFilter:()=>Oe});var a=n(70885),o=n(93264),c=n.n(o),l=n(45697),s=n.n(l),i=n(16530),u=n(99922),p=n(14748),m=n(80123),f=function(e){var t=e.className,n=e.tabIndex,r=e.tabsList,a=e.updateTab;return c().createElement(u.Tabs,{className:t,activeKey:n,onSelect:a},r.map((function(e,t){return c().createElement(u.Tab,{id:"tabs-page-".concat(t),key:"tabs-page-".concat(t),eventKey:t,title:c().createElement(u.TabTitleText,null,e)})})))};f.propTypes={className:s().string,tabIndex:s().number,tabsList:s().array,updateTab:s().func};const d=f;var y=n(42982),b=n(4942),E=n(30319);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var O=[{key:"display_name",sortKey:"display_name",props:{width:20},title:"Name"},"tags",{key:"os_version",sortKey:"os_version",props:{width:10},title:"OS"},"updated"],g=function(e,t){return function(n){var r=n.INVENTORY_ACTION_TYPES,a=n.mergeWithEntities;return t().register(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a((0,E.zw)(r,e),{page:1,perPage:10,sortBy:{key:"last_updated",direction:"desc"}})))}},k=n(15861),h=n(87757),j=n.n(h),w=n(65533),P=n.n(w),T=n(34105);const S=async e=>{let t;const n=await P().get(T.WP.concat(e)).catch((function(e){return e}));return t=200===n.status?n.data.data:n,t};var x=function(e,t,n,r,a){var o="limit=".concat(e,"&offset=").concat(t),c=function(e,t){var n="";"DESC"===t&&(n="-");var r="updated"===e?"last_seen":e;return"".concat(e?"&sort=":"").concat(n).concat(r)}(n,r),l=function(e){var t=e.hostnameOrId?"&display_name=".concat(e.hostnameOrId):"";return"".concat(t)}(a);return"?".concat(o).concat(c).concat(l)};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=function(e){return function(){var t=(0,k.Z)(j().mark((function t(n,r){var a,o,c,l,s,i,u,p,m,f,d;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.page,o=void 0===a?1:a,c=r.per_page,l=r.orderBy,s=r.orderDirection,i=r.filters,u=x(c,o*c-c,l,s,i),t.next=6,n=u,S(T.fH.concat(n));case 6:return p=t.sent,f=(m=p||{}).data,d=m.meta.count,t.abrupt("return",{results:f.map((function(t){return N(N({},t),{},{selected:(e||[]).map((function(e){return e})).includes(t.id)})})),page:o,perPage:c,orderBy:l,orderDirection:s,total:d});case 9:case"end":return t.stop()}var n}),t)})));return function(e,n){return t.apply(this,arguments)}}()},F=n(54025),Z=n(37282);const _=function(e){var t=e.component,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["component"]);return(0,o.useEffect)((function(){console.error("Unable to load inventory component. Failed to load ".concat(t,"."),n)}),[]),c().createElement("div",null,c().createElement("h1",null,"Unable to load inventory component"),c().createElement("h2",null,"Failed to load ",t),c().createElement("code",null,"More info can be found in browser console output."))};var C=n(94184),M=n.n(C),R=function(){return R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},R.apply(this,arguments)},L=function(e){var t=(0,i.useHistory)(),n=(0,Z.useStore)(),r=e.component;return c().createElement(r,{className:M()(e.className,"inventory")},c().createElement(o.Suspense,{fallback:e.fallback},c().createElement(F.ScalprumComponent,R({history:t,store:n,appName:"inventory",module:"./InventoryTable",scope:"inventory",ErrorComponent:c().createElement(_,R({component:"InventoryDetailHead",history:t,store:n},e)),ref:e.innerRef},e))))};L.propTypes={fallback:s().node,innerRef:s().object,component:s().string,className:s().string};var B=c().forwardRef((function(e,t){return c().createElement(L,R({innerRef:t},e))}));B.propTypes={fallback:s().node,component:s().string,className:s().string},B.defaultProps={fallback:c().createElement(u.Bullseye,{className:"pf-u-p-lg"},c().createElement(u.Spinner,{size:"xl"})),component:"section"};const z=B;function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=function(e){var t=e.selectedIds,n=e.selectIds,r=(0,o.useRef)(null),a=(0,o.useContext)(E.gE).getRegistry,l=(0,Z.useDispatch)();return(0,o.useEffect)((function(){var e;l({type:"INVENTORY_INIT"}),l({type:"RESET_PAGE"}),null==r||null===(e=r.current)||void 0===e||e.onRefreshData()}),[l]),c().createElement(z,{isFullView:!0,autoRefresh:!0,initialLoading:!0,showTags:!0,hideFilters:{all:!0},columns:function(e){return O.map((function(t){var n="string"==typeof t,r=n?t:t.key,a=e.find((function(e){return e.key===r}));return A(A(A({},a),n?{key:t}:t),{},{props:A(A({},null==a?void 0:a.props),null==t?void 0:t.props)})}))},ref:r,fallback:c().createElement(u.Spinner,null),onLoad:g(O,a),getEntities:D(t),tableProps:{canSelectAll:!1,isStickyHeader:!0,onSelect:n}})};V.propTypes={selectedIds:s().array,selectIds:s().func};const Y=V;var K=function(e){var t=e.task,n=e.isOpen,r=e.setModalOpened,l=(0,o.useState)([]),s=(0,a.Z)(l,2),i=s[0],p=s[1],m=(0,Z.useDispatch)();return(0,o.useEffect)((function(){p([])}),[t]),(0,o.useEffect)((function(){m({type:"SELECT_ENTITY",payload:{selected:i}})}),[i]),c().createElement(u.Modal,{"aria-label":"run-task-modal",title:t.title,isOpen:n,onClose:function(){return r(!1)},width:"70%"},c().createElement(c().Fragment,null,c().createElement(u.Flex,null,c().createElement(u.FlexItem,null,c().createElement("b",null,"Task description"))),c().createElement(u.Flex,{style:{paddingBottom:"8px"}},c().createElement(u.FlexItem,null,t.description)),c().createElement(u.Flex,null,c().createElement(u.FlexItem,null,c().createElement("a",{href:"#"},"Download preview of playbook"))),c().createElement("br",null),c().createElement("b",null,"Systems to run tasks on"),c().createElement(Y,{selectedIds:i,selectIds:function(e,t,n,r){var a=(0,y.Z)(i);a.includes(r.id)?a.splice(a.indexOf(r.id),1):a.push(r.id),p(a)}})))};K.propTypes={isOpen:s().bool,setModalOpened:s().func,task:s().object};const W=K;var G=n(12117),U=function(e){return e.content},X=function(e,t){return e.find((function(e){return e.props.type===t}))},$=function(e){var t=e.children,n=e.cardClass;return Array.isArray(t)||(t=[t]),c().createElement(u.Card,{className:n},c().createElement(u.CardTitle,{className:X(t,"title").props.className},X(t,"title")),c().createElement(u.CardBody,{className:X(t,"body").props.className},X(t,"body")),c().createElement(u.CardFooter,{className:X(t,"footer").props.className},X(t,"footer")))};$.propTypes={children:s().any,cardClass:s().string};const q=$;var J=n(35664),Q=function(e){var t=e.classname,n=e.task,r=e.isFirst,a=e.openTaskModal,o=e.variant;return c().createElement(u.Button,{"aria-label":"".concat(n.slug,"-run-task-button"),className:t,variant:o,onClick:function(){return a(n)}},r?"Run task":"Run task again")};Q.propTypes={classname:s().string,task:s().object,isFirst:s().bool,openTaskModal:s().func,variant:s().string};const ee=Q;var te=function(e){var t=e.button,n=e.color,r=e.error,a=e.icon,o=e.isSmall,l=e.text,s=e.title;return c().createElement(u.EmptyState,{variant:o?u.EmptyStateVariant.small:u.EmptyStateVariant.large},a?c().createElement(u.EmptyStateIcon,{icon:a,color:n||null,className:o?"small-empty-state-icon":null}):null,c().createElement("br",null),c().createElement(u.Title,{headingLevel:o?"h5":"h1",size:o?"md":"lg"},s),c().createElement(u.EmptyStateBody,null,l?l.map((function(e,t){return c().createElement(c().Fragment,{key:"line-".concat(t)},e,c().createElement("br",null))})):null,r||null),t)};te.propTypes={button:s().object,color:s().string,error:s().string,icon:s().any,isSmall:s().bool,text:s().array,title:s().string};const ne=te;var re=n(84564),ae=function(e){var t,n=e.availableTasks,r=e.error,a=e.openTaskModal;return c().createElement("div",{"aria-label":"available-tasks-table"},r?c().createElement(ne,{icon:re.ZP,color:"#c9190b",title:"Available tasks cannot be displayed",text:T.Rl,error:"Error ".concat(null==r||null===(t=r.response)||void 0===t?void 0:t.status,": ").concat(null==r?void 0:r.message)}):n.length?null==n?void 0:n.map((function(e){return c().createElement(c().Fragment,{"aria-label":e.title,key:e.title},c().createElement(q,null,c().createElement(U,{content:e.title,type:"title"}),c().createElement(U,{className:"card-task-description",content:e.description,type:"body"}),c().createElement(U,{content:c().createElement(u.Flex,{direction:{default:"column"}},c().createElement(u.FlexItem,null,c().createElement("a",{href:"#"},"Download preview of playbook")),c().createElement(u.FlexItem,null,c().createElement(ee,{task:e,isFirst:!0,variant:"primary",openTaskModal:a}))),type:"footer"})),c().createElement("br",null))})):c().createElement(ne,{title:T.kL,text:T.Fd}))};ae.propTypes={availableTasks:s().array,error:s().object,openTaskModal:s().func};const oe=ae;var ce=n(65811),le=function(){var e=T.LP;return null==e?void 0:e.map((function(e,t){return c().createElement(c().Fragment,{key:"loading-".concat(t)},c().createElement(q,null,c().createElement(U,{content:c().createElement(J.Z,{size:J.i.md}),type:"title"}),c().createElement(U,{content:c().createElement(J.Z,{size:J.i.md}),type:"body"}),c().createElement(U,{content:c().createElement(J.Z,{size:J.i.md}),type:"footer"})),c().createElement("br",null))}))},se=function(e){var t=e.openTaskModal,n=(0,o.useState)([]),r=(0,a.Z)(n,2),l=r[0],s=r[1],i=(0,o.useState)(!1),u=(0,a.Z)(i,2),p=u[0],m=u[1],f=(0,o.useState)(),d=(0,a.Z)(f,2),y=d[0],b=d[1],E=function(e){var t,n;null!=e&&null!==(t=e.response)&&void 0!==t&&t.status&&200!==(null==e||null===(n=e.response)||void 0===n?void 0:n.status)?(b(e),(0,ce.q)({variant:"danger",title:"Error",description:e.message,dismissable:!0})):s(e),m(!1)};return(0,o.useLayoutEffect)((function(){var e=function(){var e=(0,k.Z)(j().mark((function e(){var t;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,S(T.Hu);case 3:t=e.sent,E(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),c().createElement("div",{"aria-label":"available-tasks"},p?c().createElement(le,null):c().createElement(oe,{availableTasks:l,error:y,openTaskModal:t}))};se.propTypes={openTaskModal:s().func};const ie=se;var ue=n(24423),pe=n(79886),me=function(e,t){var n=e.id,r=e.title;return c().createElement(i.Link,{key:"task-title-".concat(t),to:"/executed/".concat(n)},r)};me.propTypes={id:s().number,title:s().string,index:s().number};var fe={title:"Task",props:{width:35},sortByProp:"title",renderExport:function(e){return e.title},renderFunc:(0,pe.Rg)(me)},de={title:"Systems",props:{width:20},sortByProp:"system_count",renderExport:function(e){return e.system_count}},ye={title:"Run date/time",props:{width:20},sortByProp:"run_date_time",renderExport:function(e){return(0,pe.Ws)(e.run_date_time)}},be=[fe,de,ye];const Ee=[fe,de,ye];var ve=n(22271),Oe={type:n(83237).Y.text,label:"Task",filter:function(e,t){return e.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())}))}};function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const he=function(){var e=Object.values(r),t=(0,o.useState)([]),n=(0,a.Z)(t,2),l=n[0],s=n[1];return(0,o.useEffect)((function(){var e;(e=ve.Qv).map((function(e){return e.run_date_time=(0,pe.Ws)(e.end)})),s(e)}),[]),c().createElement(ue.Z,{label:"completed-tasks",ouiaId:"completed-tasks-table",columns:Ee,items:l,filters:{filterConfig:e},options:ke(ke({},T.t_),{},{exportable:ke(ke({},T.t_.exportable),{},{columns:be})}),isStickyHeader:!0})};var je=function(e){var t=e.tab,n=(0,i.useHistory)(),r=(0,o.useState)(t),l=(0,a.Z)(r,2),s=l[0],f=l[1],y=(0,o.useState)(!1),b=(0,a.Z)(y,2),E=b[0],v=b[1],O=(0,o.useState)({}),g=(0,a.Z)(O,2),k=g[0],h=g[1];return(0,o.useEffect)((function(){0===t&&n.push("available")}),[]),c().createElement(c().Fragment,null,c().createElement(W,{task:k,isOpen:E,setModalOpened:v}),c().createElement(m.Z,null,c().createElement(G.Z,{flexContents:T.j7,flexProps:T.Jc})),c().createElement(d,{className:"tabs-background",tabIndex:s,updateTab:function(e,t){n.push(t?"executed":"available"),f(t)},tabsList:T.EZ}),c().createElement(p.Z,null,c().createElement(u.Stack,{hasGutter:!0},c().createElement(u.StackItem,null,0===s?c().createElement(ie,{openTaskModal:function(e){v(!0),h(e)}}):c().createElement(he,null)))))};je.propTypes={tab:s().number};const we=je}}]);
//# sourceMappingURL=../sourcemaps/TasksPage.5417bae7b5cf39cfe11d410699714deb.js.map