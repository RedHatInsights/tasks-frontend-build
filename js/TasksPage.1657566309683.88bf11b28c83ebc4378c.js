"use strict";(self.webpackChunktasks_frontend=self.webpackChunktasks_frontend||[]).push([[550],{2112:(e,t,n)=>{t.MS={name:"WrenchIcon",height:512,width:512,svgPath:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z",yOffset:0,xOffset:0},t.R0=n(35183).createIcon(t.MS),t.ZP=t.R0},5086:(e,t,n)=>{n.r(t),n.d(t,{default:()=>je});var r={};n.r(r),n.d(r,{nameFilter:()=>ve});var a=n(15861),o=n(70885),s=n(87757),c=n.n(s),l=n(93264),i=n.n(l),u=n(45697),p=n.n(u),d=n(16530),f=n(99922),m=n(14748),b=n(80123),y=function(e){var t=e.className,n=e.tabIndex,r=e.tabsList,a=e.updateTab;return i().createElement(f.Tabs,{className:t,activeKey:n,onSelect:a},r.map((function(e,t){return i().createElement(f.Tab,{id:"tabs-page-".concat(t),key:"tabs-page-".concat(t),eventKey:t,title:i().createElement(f.TabTitleText,null,e)})})))};y.propTypes={className:p().string,tabIndex:p().number,tabsList:p().array,updateTab:p().func};const v=y;var E=n(42982),g=n(4942),O=n(30319);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var h=[{key:"display_name",sortKey:"display_name",props:{width:20},title:"Name"},"tags",{key:"os_version",sortKey:"os_version",props:{width:10},title:"OS"},"updated"],w=function(e,t){return function(n){var r=n.INVENTORY_ACTION_TYPES,a=n.mergeWithEntities;return t().register(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a((0,O.zw)(r,e),{page:1,perPage:10,sortBy:{key:"last_updated",direction:"desc"}})))}},j=n(57318),P=function(e,t,n,r,a){var o="limit=".concat(e,"&offset=").concat(t),s=function(e,t){var n="";"DESC"===t&&(n="-");var r="updated"===e?"last_seen":e;return"".concat(e?"&sort=":"").concat(n).concat(r)}(n,r),c=function(e){var t=e.hostnameOrId?"&display_name=".concat(e.hostnameOrId):"";return"".concat(t)}(a);return"?".concat(o).concat(s).concat(c)};function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(e){return function(){var t=(0,a.Z)(c().mark((function t(n,r){var a,o,s,l,i,u,p,d,f,m,b;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.page,o=void 0===a?1:a,s=r.per_page,l=r.orderBy,i=r.orderDirection,u=r.filters,p=P(s,o*s-s,l,i,u),t.next=6,(0,j.lc)(p);case 6:return d=t.sent,m=(f=d||{}).data,b=f.meta.count,t.abrupt("return",{results:m.map((function(t){return T(T({},t),{},{selected:(e||[]).map((function(e){return e})).includes(t.id)})})),page:o,perPage:s,orderBy:l,orderDirection:i,total:b});case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Z=n(54025),_=n(37282);const I=function(e){var t=e.component,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["component"]);return(0,l.useEffect)((function(){console.error("Unable to load inventory component. Failed to load ".concat(t,"."),n)}),[]),i().createElement("div",null,i().createElement("h1",null,"Unable to load inventory component"),i().createElement("h2",null,"Failed to load ",t),i().createElement("code",null,"More info can be found in browser console output."))};var N=n(94184),D=n.n(N),F=function(){return F=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},F.apply(this,arguments)},C=function(e){var t=(0,d.useHistory)(),n=(0,_.useStore)(),r=e.component;return i().createElement(r,{className:D()(e.className,"inventory")},i().createElement(l.Suspense,{fallback:e.fallback},i().createElement(Z.ScalprumComponent,F({history:t,store:n,appName:"inventory",module:"./InventoryTable",scope:"inventory",ErrorComponent:i().createElement(I,F({component:"InventoryDetailHead",history:t,store:n},e)),ref:e.innerRef},e))))};C.propTypes={fallback:p().node,innerRef:p().object,component:p().string,className:p().string};var M=i().forwardRef((function(e,t){return i().createElement(C,F({innerRef:t},e))}));M.propTypes={fallback:p().node,component:p().string,className:p().string},M.defaultProps={fallback:i().createElement(f.Bullseye,{className:"pf-u-p-lg"},i().createElement(f.Spinner,{size:"xl"})),component:"section"};const R=M;function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=function(e){var t=e.selectedIds,n=e.selectIds,r=(0,l.useRef)(null),a=(0,l.useContext)(O.gE).getRegistry,o=(0,_.useDispatch)();return(0,l.useEffect)((function(){var e;o({type:"INVENTORY_INIT"}),o({type:"RESET_PAGE"}),null==r||null===(e=r.current)||void 0===e||e.onRefreshData()}),[o]),(0,l.useEffect)((function(){o({type:"SELECT_ENTITY",payload:{selected:t}})}),[t]),i().createElement(R,{isFullView:!0,autoRefresh:!0,initialLoading:!0,hideFilters:{all:!0},columns:function(e){return h.map((function(t){var n="string"==typeof t,r=n?t:t.key,a=e.find((function(e){return e.key===r}));return B(B(B({},a),n?{key:t}:t),{},{props:B(B({},null==a?void 0:a.props),null==t?void 0:t.props)})}))},ref:r,fallback:i().createElement(f.Spinner,null),onLoad:w(h,a),getEntities:S(t),tableProps:{canSelectAll:!1,isStickyHeader:!0,onSelect:n}})};z.propTypes={selectedIds:p().array,selectIds:p().func};const H=z;var W=n(84564),q=n(34105),A=n(45713),Y=n(65811),K=function(e){var t=e.classname,n=e.ids,r=e.setModalOpened,o=e.slug,s=e.title,l=e.variant,u=function(){var e=(0,a.Z)(c().mark((function e(){var t,a,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!1),e.next=3,(0,j.t8)({task:o,hosts:n});case 3:null!=(l=e.sent)&&null!==(t=l.response)&&void 0!==t&&t.status&&200!==(null==l||null===(a=l.response)||void 0===a?void 0:a.status)?(0,Y.q)({variant:"danger",title:"Error",description:l.message,dismissable:!0}):(0,q.qf)(s,n,l.data.id);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i().createElement(f.Button,{"aria-label":"".concat(o,"-submit-task-button"),className:t,variant:l,onClick:function(){return u()}},"Execute task")};K.propTypes={classname:p().string,ids:p().array,setModalOpened:p().func,slug:p().string,title:p().string,variant:p().string};const U=K;var V=function(e){var t,n=e.error,r=e.task,a=e.isOpen,s=e.setModalOpened,c=(0,l.useState)([]),u=(0,o.Z)(c,2),p=u[0],d=u[1];return(0,l.useEffect)((function(){d([])}),[r]),i().createElement(f.Modal,{"aria-label":"run-task-modal",title:r.title||"Error",isOpen:a,onClose:function(){return s(!1)},width:"70%"},n?i().createElement(A.Z,{icon:W.ZP,color:"#c9190b",title:"This task cannot be displayed",text:q.eJ,error:"Error ".concat(null==n||null===(t=n.response)||void 0===t?void 0:t.status,": ").concat(null==n?void 0:n.message)}):i().createElement(i().Fragment,null,i().createElement(f.Flex,null,i().createElement(f.FlexItem,null,i().createElement("b",null,"Task description"))),i().createElement(f.Flex,{style:{paddingBottom:"8px"}},i().createElement(f.FlexItem,null,r.description)),i().createElement(f.Flex,null,i().createElement(f.FlexItem,null,i().createElement("a",{href:"".concat(q.WP).concat(q.Hu,"/").concat(r.slug,"/playbook")},"Download preview of playbook"))),i().createElement("br",null),i().createElement("b",null,"Systems to run tasks on"),i().createElement(H,{selectedIds:p,selectIds:function(e,t,n,r){var a=(0,E.Z)(p);a.includes(r.id)?a.splice(a.indexOf(r.id),1):a.push(r.id),d(a)}}),i().createElement(U,{ids:p,setModalOpened:s,slug:r.slug,title:r.title,variant:"primary"})))};V.propTypes={error:p().object,isOpen:p().bool,setModalOpened:p().func,task:p().object};const G=V;var J=n(12117),Q=function(e){return e.content},X=function(e,t){return e.find((function(e){return e.props.type===t}))},$=function(e){var t=e.children,n=e.cardClass;return Array.isArray(t)||(t=[t]),i().createElement(f.Card,{className:n},i().createElement(f.CardTitle,{className:X(t,"title").props.className},X(t,"title")),i().createElement(f.CardBody,{className:X(t,"body").props.className},X(t,"body")),i().createElement(f.CardFooter,{className:X(t,"footer").props.className},X(t,"footer")))};$.propTypes={children:p().any,cardClass:p().string};const ee=$;var te=n(35664),ne=function(e){var t=e.classname,n=e.isFirst,r=e.openTaskModal,a=e.slug,o=e.variant;return i().createElement(f.Button,{"aria-label":"".concat(a,"-run-task-button"),className:t,variant:o,onClick:function(){return r(a)}},n?"Run task":"Run task again")};ne.propTypes={classname:p().string,isFirst:p().bool,openTaskModal:p().func,slug:p().string,variant:p().string};const re=ne;var ae=function(e){var t,n=e.availableTasks,r=e.error,a=e.openTaskModal;return i().createElement("div",{"aria-label":"available-tasks-table"},r?i().createElement(A.Z,{icon:W.ZP,color:"#c9190b",title:"Available tasks cannot be displayed",text:q.Rl,error:"Error ".concat(null==r||null===(t=r.response)||void 0===t?void 0:t.status,": ").concat(null==r?void 0:r.message)}):null!=n&&n.length?null==n?void 0:n.map((function(e){return i().createElement(i().Fragment,{"aria-label":e.title,key:e.title},i().createElement(ee,null,i().createElement(Q,{content:e.title,type:"title"}),i().createElement(Q,{className:"card-task-description",content:e.description,type:"body"}),i().createElement(Q,{content:i().createElement(f.Flex,{direction:{default:"column"}},i().createElement(f.FlexItem,null,i().createElement("a",{href:"".concat(q.WP).concat(q.Hu,"/").concat(e.slug,"/playbook")},"Download preview of playbook")),i().createElement(f.FlexItem,null,i().createElement(re,{slug:e.slug,isFirst:!0,variant:"primary",openTaskModal:a}))),type:"footer"})),i().createElement("br",null))})):i().createElement(A.Z,{title:q.kL,text:q.Fd}))};ae.propTypes={availableTasks:p().array,error:p().object,openTaskModal:p().func};const oe=ae;var se=function(){var e=q.LP;return null==e?void 0:e.map((function(e,t){return i().createElement(i().Fragment,{key:"loading-".concat(t)},i().createElement(ee,null,i().createElement(Q,{content:i().createElement(te.Z,{size:te.i.md}),type:"title"}),i().createElement(Q,{content:i().createElement(te.Z,{size:te.i.md}),type:"body"}),i().createElement(Q,{content:i().createElement(te.Z,{size:te.i.md}),type:"footer"})),i().createElement("br",null))}))},ce=function(e){var t=e.openTaskModal,n=(0,l.useState)([]),r=(0,o.Z)(n,2),s=r[0],u=r[1],p=(0,l.useState)(!1),d=(0,o.Z)(p,2),f=d[0],m=d[1],b=(0,l.useState)(),y=(0,o.Z)(b,2),v=y[0],E=y[1],g=function(e){var t,n;null!=e&&null!==(t=e.response)&&void 0!==t&&t.status&&200!==(null==e||null===(n=e.response)||void 0===n?void 0:n.status)?(E(e),(0,Y.q)({variant:"danger",title:"Error",description:e.message,dismissable:!0})):u(e.data),m(!1)};return(0,l.useEffect)((function(){var e=function(){var e=(0,a.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,(0,j.Cj)();case 3:t=e.sent,g(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),i().createElement("div",{"aria-label":"available-tasks"},f?i().createElement(se,null):i().createElement(oe,{availableTasks:s,error:v,openTaskModal:t}))};ce.propTypes={openTaskModal:p().func};const le=ce;var ie=n(2112),ue=n(79886),pe=function(e,t){var n=e.id,r=e.task_title;return i().createElement(d.Link,{key:"task-title-".concat(t),to:"/executed/".concat(n)},r)};pe.propTypes={id:p().number,title:p().string,task_title:p().string,index:p().number};var de={title:"Task",props:{width:35},sortByProp:"task_title",renderExport:function(e){return e.task_title},renderFunc:(0,ue.Rg)(pe)},fe={title:"Systems",props:{width:20},sortByProp:"systems_count",renderExport:function(e){return e.system_count}},me={title:"Run date/time",props:{width:20},sortByProp:"run_date_time",renderExport:function(e){return(0,ue.Ws)(e.run_date_time)}},be=[de,fe,me];const ye=[de,fe,me];var ve={type:n(83237).Y.text,label:"Task",filter:function(e,t){return e.filter((function(e){return e.task_title.toLowerCase().includes(t.toLowerCase())}))}},Ee=n(23690),ge=n(24423);function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const he=function(){var e,t=Object.values(r),n=(0,l.useState)(q.vg),s=(0,o.Z)(n,2),u=s[0],p=s[1],d=(0,l.useState)(),f=(0,o.Z)(d,2),m=f[0],b=f[1],y=function(){var e=(0,a.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t||null===(n=t.response)||void 0===n||!n.status||200===(null==t||null===(r=t.response)||void 0===r?void 0:r.status)){e.next=5;break}b(t),(0,Y.q)({variant:"danger",title:"Error",description:t.message,dismissable:!0}),e.next=8;break;case 5:return t.data.map((function(e){return e.run_date_time=(0,ue.Ws)(e.end)})),e.next=8,p(t.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){var e=function(){var e=(0,a.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.nW)();case 2:t=e.sent,y(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),i().createElement("div",{"aria-label":"completed-tasks"},m?i().createElement(A.Z,{icon:W.ZP,color:"#c9190b",title:"Completed tasks cannot be displayed",text:q.Nq,error:"Error ".concat(null==m||null===(e=m.response)||void 0===e?void 0:e.status,": ").concat(null==m?void 0:m.message)}):0===u.length?i().createElement(A.Z,{icon:ie.ZP,color:"#6a6e73",title:q.Uo,text:q.R_}):i().createElement(ge.Z,{ouiaId:"completed-tasks-table",columns:ye,items:u,filters:{filterConfig:t},options:ke(ke({},q.t_),{},{exportable:ke(ke({},q.t_.exportable),{},{columns:be})}),emptyRows:(0,Ee.f)("tasks"),isStickyHeader:!0}))};var we=function(e){var t=e.tab,n=(0,d.useHistory)(),r=(0,l.useState)(t),s=(0,o.Z)(r,2),u=s[0],p=s[1],y=(0,l.useState)(!1),E=(0,o.Z)(y,2),g=E[0],O=E[1],k=(0,l.useState)({}),h=(0,o.Z)(k,2),w=h[0],P=h[1],x=(0,l.useState)(),T=(0,o.Z)(x,2),S=T[0],Z=T[1];(0,l.useEffect)((function(){0===t&&n.push("available")}),[]);var _=function(){var e=(0,a.Z)(c().mark((function e(t){var n,r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.Sl)(t);case 2:null!=(a=e.sent)&&null!==(n=a.response)&&void 0!==n&&n.status&&200!==(null==a||null===(r=a.response)||void 0===r?void 0:r.status)?(Z(a),(0,Y.q)({variant:"danger",title:"Error",description:a.message,dismissable:!0})):P(a),O(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i().createElement(i().Fragment,null,i().createElement(G,{error:S,task:w,isOpen:g,setModalOpened:O}),i().createElement(b.Z,null,i().createElement(J.Z,{flexContents:q.j7,flexProps:q.Jc})),i().createElement(v,{className:"tabs-background",tabIndex:u,updateTab:function(e,t){n.push(t?"executed":"available"),p(t)},tabsList:q.EZ}),i().createElement(m.Z,null,i().createElement(f.Stack,{hasGutter:!0},i().createElement(f.StackItem,null,0===u?i().createElement(le,{openTaskModal:_}):i().createElement(he,null)))))};we.propTypes={tab:p().number};const je=we}}]);
//# sourceMappingURL=../sourcemaps/TasksPage.4e1600741b863763d28512e439acd91f.js.map