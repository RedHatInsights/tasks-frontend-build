"use strict";(self.webpackChunktasks_frontend=self.webpackChunktasks_frontend||[]).push([[292],{19694:(e,t,r)=>{t.RI={name:"ExclamationTriangleIcon",height:512,width:576,svgPath:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z",yOffset:0,xOffset:0},t.LP=r(35183).I(t.RI),t.ZP=t.LP},31369:(e,t,r)=>{t.nQ={name:"InfoCircleIcon",height:512,width:512,svgPath:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z",yOffset:0,xOffset:0},t.uM=r(35183).I(t.nQ),t.ZP=t.uM},96779:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Te});var n=r(4942),o=r(42982),l=r(87462),i=r(15861),a=r(70885),s=r(64687),c=r.n(s),u=r(10756),m=r.n(u),p=r(62012),v=r(30381),y=r.n(v),d=r(42019),f=r(89376),g=r(39173),C=r(16201),E=r(84564),b=r(45697),x=r.n(b),S=r(79886),h=function(e){var t=e.alert,r=e.content;return m().createElement(C.Split,null,t?m().createElement(m().Fragment,null,m().createElement(C.SplitItem,{style:{paddingRight:"8px"}},m().createElement(C.Icon,{status:"danger"},m().createElement(E.ZP,null))),m().createElement(C.SplitItem,{style:{paddingRight:"16px"}},m().createElement("span",{style:{color:"#C9190B"}},"Alert"))):null,m().createElement(C.SplitItem,{color:"#A30000"},r))};h.propTypes={alert:x().bool,content:x().oneOfType([x().string,x().object])};const Z=h;var k=r(52033),P=r(55140),w=function(e,t){var r,n=e.system,o=e.display_name,l=(0,P.Z)();return o?(0,k.d)(n,o,"system-title-".concat(t),null==l||null===(r=l.isBeta)||void 0===r?void 0:r.call(l)):m().createElement("span",{style:{color:"#72767B"}},"System deleted")};w.propTypes={system:x().string,display_name:x().node};var L={title:"System name",props:{width:30},sortByProp:"display_name",renderExport:function(e){return e.display_name||"System deleted"},renderFunc:(0,S.Rg)(w)},O={title:"Status",props:{width:10},sortByProp:"status",renderExport:function(e){return e.status}},I={title:"Message",props:{width:35},sortByFunction:function(e){return e.results.message},renderExport:function(e){return e.results.message},renderFunc:function(e,t,r){return m().createElement(Z,{content:r.results.message,alert:r.results.alert||"Failure"===r.status||"Timeout"===r.status})}},T=[L,O,I],j=[L,I];const M=[L,O,I];var _=r(87123),A=[{type:_.Yu.text,label:"Name",filter:function(e,t){return e.filter((function(e){return e.display_name?e.display_name.toLowerCase().includes(t.toLowerCase()):null}))}}],B=[{type:_.Yu.checkbox,label:"Status",filter:function(e,t){return e.filter((function(e){return t.includes(e.status.toLowerCase())}))},items:[{label:"Running",value:"running"},{label:"Success",value:"success"},{label:"Failure",value:"failure"},{label:"Timeout",value:"timeout"}]}],F=r(3470),R=r(12117),D=r(45713),N=r(37211),H=r(11207),Y=r(23690),z=r(45987),G=r(92397),J=["href"],W=["children"],Q=function(e){var t=e.href,r=(0,z.Z)(e,J);return m().createElement(G.Z,(0,l.Z)({},r,{to:t}))};Q.propTypes={href:x().string};var V=function(e){var t=e.children,r=(0,z.Z)(e,W);return m().createElement(C.BreadcrumbItem,(0,l.Z)({},r,{component:Q}),t)};V.propTypes={children:x().node};const K=V;var q=r(933),U=r(67303),X=r(38704),$=r(43707),ee=r(2311),te=r(19694),re=r(31369),ne={error:{text:"Inhibitor",icon:m().createElement(E.ZP,null),iconSeverityColor:"danger",titleColor:"#A30000",severityColor:"red",severityLevel:2500},overridable:{text:"Inhibitor",icon:m().createElement(E.ZP,null),iconSeverityColor:"danger",titleColor:"#A30000",severityColor:"red",severityLevel:2e3},skip:{text:"Skipped",icon:m().createElement(E.ZP,null),iconSeverityColor:"danger",titleColor:"#A30000",severityColor:"red",severityLevel:1500},warning:{text:"Warning",icon:m().createElement(te.ZP,null),iconSeverityColor:"warning",titleColor:"#795000",severityColor:"orange",severityLevel:1e3},info:{text:"Info",icon:m().createElement(re.ZP,null),iconSeverityColor:"info",titleColor:"#002952",severityColor:"blue",severityLevel:500}},oe={error:{text:"Inhibitor",icon:m().createElement(E.ZP,null),iconSeverityColor:"danger",titleColor:"#A30000",severityColor:"red",severityLevel:2500},overridable:{text:"Inhibitor",icon:m().createElement(E.ZP,null),iconSeverityColor:"danger",titleColor:"#A30000",severityColor:"red",severityLevel:2e3},skip:{text:"Skipped",icon:m().createElement(E.ZP,null),iconSeverityColor:"danger",titleColor:"#A30000",severityColor:"red",severityLevel:1500},warning:{text:"Warning",icon:m().createElement(te.ZP,null),iconSeverityColor:"warning",titleColor:"#795000",severityColor:"orange",severityLevel:1e3},info:{text:"Info",icon:m().createElement(re.ZP,null),iconSeverityColor:"info",titleColor:"#002952",severityColor:"blue",severityLevel:500}},le={error:{text:"Inhibitor",icon:m().createElement(E.ZP,null),iconSeverityColor:"danger",titleColor:"#A30000",severityColor:"red",severityLevel:2500},overridable:{text:"Inhibitor",icon:m().createElement(E.ZP,null),iconSeverityColor:"danger",titleColor:"#A30000",severityColor:"red",severityLevel:2e3},skip:{text:"Skipped",icon:m().createElement(E.ZP,null),iconSeverityColor:"danger",titleColor:"#A30000",severityColor:"red",severityLevel:1500},warning:{text:"Warning",icon:m().createElement(te.ZP,null),iconSeverityColor:"warning",titleColor:"#795000",severityColor:"orange",severityLevel:1e3},info:{text:"Info",icon:m().createElement(re.ZP,null),iconSeverityColor:"info",titleColor:"#002952",severityColor:"blue",severityLevel:500}},ie={error:{text:"Inhibitor",icon:m().createElement(E.ZP,null),iconSeverityColor:"danger",titleColor:"#A30000",severityColor:"red",severityLevel:2500},overridable:{text:"Inhibitor",icon:m().createElement(E.ZP,null),iconSeverityColor:"danger",titleColor:"#A30000",severityColor:"red",severityLevel:2e3},skip:{text:"Skipped",icon:m().createElement(E.ZP,null),iconSeverityColor:"danger",titleColor:"#A30000",severityColor:"red",severityLevel:1500},warning:{text:"Warning",icon:m().createElement(te.ZP,null),iconSeverityColor:"warning",titleColor:"#795000",severityColor:"orange",severityLevel:1e3},info:{text:"Info",icon:m().createElement(re.ZP,null),iconSeverityColor:"info",titleColor:"#002952",severityColor:"blue",severityLevel:500}},ae={high:{text:"High risk",icon:m().createElement(E.ZP,null),iconSeverityColor:"danger",titleColor:"#A30000",severityColor:"red",severityLevel:2e3},medium:{text:"Medium risk",icon:m().createElement(te.ZP,null),iconSeverityColor:"warning",titleColor:"#795000",severityColor:"orange",severityLevel:1500},low:{text:"Low risk",icon:m().createElement(te.ZP,null),iconSeverityColor:"warning",titleColor:"#795000",severityColor:"orange",severityLevel:1e3},info:{text:"Info",icon:m().createElement(re.ZP,null),iconSeverityColor:"info",titleColor:"#002952",severityColor:"blue",severityLevel:500}},se={high:{text:"High risk",icon:m().createElement(E.ZP,null),iconSeverityColor:"danger",titleColor:"#A30000",severityColor:"red",severityLevel:2e3},medium:{text:"Medium risk",icon:m().createElement(te.ZP,null),iconSeverityColor:"warning",titleColor:"#795000",severityColor:"orange",severityLevel:1500},low:{text:"Low risk",icon:m().createElement(te.ZP,null),iconSeverityColor:"warning",titleColor:"#795000",severityColor:"orange",severityLevel:1e3},info:{text:"Info",icon:m().createElement(re.ZP,null),iconSeverityColor:"info",titleColor:"#002952",severityColor:"blue",severityLevel:500}};const ce={converttorhelconversionSeverityMap:ne,converttorhelconversionstageSeverityMap:oe,converttorhelpreanalysisSeverityMap:le,converttorhelpreanalysisstageSeverityMap:ie,leapppreupgradeSeverityMap:ae,leapppreupgradescriptstageSeverityMap:ae,leapppreupgradestageSeverityMap:ae,leappupgradeSeverityMap:se,leappupgradescriptstageSeverityMap:se,leappupgradestageSeverityMap:se};var ue=function(e){var t=e.severity,r=e.taskConstantMapper,n=e.title,o=ce[r][t.toLowerCase()];return m().createElement("span",null,m().createElement(C.Icon,{status:o.iconSeverityColor,style:{marginRight:"8px"}},o.icon),m().createElement("span",{style:{color:o.titleColor}},m().createElement("strong",null,n)))};ue.propTypes={severity:x().string,taskConstantMapper:x().string,title:x().string};const me=ue;var pe=function(e){var t=e.color,r=e.icon,n=e.text;return m().createElement(C.Label,{color:t,icon:r,style:{marginTop:"16px",marginBottom:"4px"},className:"pf-m-compact"},n)};pe.propTypes={color:x().string,icon:x().any,text:x().string};const ve=pe;var ye=function(e){var t,r,n,o,l=e.entry,i=e.taskConstantMapper,a=l.detail,s=l.key,c=l.severity,u=l.summary,p=l.title,v=function(e,t,r){return e.map((function(e,n){var o="".concat(t,"-").concat(n);return m().createElement("div",{key:o},n>0?m().createElement("span",null,m().createElement("br",null)):null,m().createElement("span",{className:r},e.type?"[".concat(e.type,"] ").concat("command"===e.type&&Array.isArray(e.context)?e.context.join(" "):e.context):"".concat(e.context)))}))},y=function(e,t){return m().createElement(C.Grid,{hasGutter:!0,className:"entry-detail-title"},m().createElement(C.GridItem,{span:2,className:"entry-detail-content"},e),m().createElement(C.GridItem,{xl2:5,xl:5,l:6,m:7,sm:8,style:{whiteSpace:"pre-line"}},"function"==typeof t?t():t))};return m().createElement(m().Fragment,null,m().createElement("div",null,m().createElement(ve,{color:ce[i][c.toLowerCase()].severityColor,icon:ce[i][c.toLowerCase()].icon,text:ce[i][c.toLowerCase()].text})),m().createElement("div",{className:"entry-title"},p),m().createElement("div",null,m().createElement(m().Fragment,null,y("Summary",u),null!=a&&a.diagnosis&&""!==(null==a||null===(t=a.diagnosis)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.context)?y("Diagnosis",v(a.diagnosis,"diagnosis")):null,null!=a&&a.remediations&&""!==(null==a||null===(n=a.remediations)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.context)?y("Remediation",v(a.remediations,"remediations","remediations-font-family")):null,y("Key",s))))};ye.propTypes={entry:x().object,taskConstantMapper:x().string};const de=ye;var fe=r(71002),ge=r(40842);function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var be=function(e){var t,r=e.rowPairs,o=e.isReportJson,l=0,i=(0,u.useState)(Object.fromEntries(Object.entries(r).map((function(e){return[(0,a.Z)(e,1)[0],Boolean(!1)]})))),s=(0,a.Z)(i,2),c=s[0],p=s[1],v=function(e,t){p(Ee(Ee({},c),{},(0,n.Z)({},t,!c[t])))};return o?r.map((function(e,t){return m().createElement(m().Fragment,{key:t},function(e,t){var r=m().createElement(ee.Tr,{key:l},m().createElement(ee.Td,{expand:{rowIndex:t,isExpanded:c[t],onToggle:v}}),m().createElement(ee.Td,null,e));return l+=1,r}(e.parent,t),function(e,t){var r=m().createElement(ee.Tr,{className:!0===c[t]?"pf-m-expanded":null,key:l,isExpanded:!0===c[t]},m().createElement(ee.Td,null),m().createElement(ee.Td,null,e));return l+=1,r}(e.child,t))})):m().createElement(C.CodeBlock,{style:(t={},(0,n.Z)(t,ge.c_code_block__header_BorderBottomColor.name,ge.global_palette_white),(0,n.Z)(t,"backgroundColor","#ffffff"),t)},m().createElement(C.CodeBlockCode,null,"object"!==(0,fe.Z)(r)||null===r||Array.isArray(r)?r:JSON.stringify(r,null,2)))};be.propTypes={isReportJson:x().bool,rowPairs:x().array};const xe=be;var Se=function(e){var t,r=e.taskSlug,n=e.item,o=!(null===(t=n.results.report_json)||void 0===t||!t.entries),l=function(e,t,r){var n=r.toLowerCase().replace(/-/g,""),o=[];return t?function(e,t){return e.sort((function(e,r){var n=ce[t][e.severity.toLowerCase()].severityLevel,o=ce[t][r.severity.toLowerCase()].severityLevel;return n>o?-1:o>n?1:0}))}(e,"".concat(n,"SeverityMap")).forEach((function(e){o.push({parent:m().createElement(me,{severity:e.severity,title:e.title,taskConstantMapper:"".concat(n,"SeverityMap")}),child:m().createElement(de,{entry:e,taskConstantMapper:"".concat(n,"SeverityMap")})})})):o=e[0],o}(o?n.results.report_json.entries:[n.results.report],o,r);return m().createElement("div",null,m().createElement(ee.Table,{variant:"compact",style:{marginBottom:"30px","--pf-v5-c-table__expandable-row--after--border-width--base":"0"}},m().createElement(ee.Tbody,null,m().createElement(xe,{rowPairs:l,isReportJson:o}))))};Se.propTypes={item:x().object,taskSlug:x().string};const he=Se;var Ze=r(98773),ke=r(79114),Pe=r(99335),we=function(e){var t=e.parameters;return!(null==t||!t.length)&&m().createElement(C.Flex,null,m().createElement(C.FlexItem,null,m().createElement(C.TextContent,null,m().createElement(C.Text,{component:C.TextVariants.h4},"Parameter details"),t.map((function(e){return m().createElement(C.Text,{key:"parameter-".concat(e.key),component:C.TextVariants.p,className:"pf-u-mb-sm"},e.key,": ",m().createElement("b",null,e.value))})))))};we.propTypes={parameters:x().array};const Le=we;function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Te=function(){var e,t=(0,p.useParams)().id,r=(0,u.useState)(F.iS),n=(0,a.Z)(r,2),s=n[0],v=n[1],b=(0,u.useState)(F.Pu),x=(0,a.Z)(b,2),S=x[0],h=x[1],Z=(0,u.useState)(!0),k=(0,a.Z)(Z,2),w=k[0],L=k[1],O=(0,u.useState)(),I=(0,a.Z)(O,2),_=I[0],z=I[1],G=(0,u.useState)(!1),J=(0,a.Z)(G,2),W=J[0],Q=J[1],V=(0,u.useState)([]),ee=(0,a.Z)(V,2),te=ee[0],re=ee[1],ne=(0,u.useState)(!1),oe=(0,a.Z)(ne,2),le=oe[0],ie=oe[1],ae=(0,u.useState)(!1),se=(0,a.Z)(ae,2),ce=se[0],ue=se[1],me=(0,u.useState)(!1),pe=(0,a.Z)(me,2),ve=pe[0],ye=pe[1],de=(0,u.useState)(),fe=(0,a.Z)(de,2),ge=fe[0],Ce=fe[1],Ee=(0,u.useState)(!1),be=(0,a.Z)(Ee,2),xe=be[0],Se=be[1],we=(0,P.Z)(),Oe=(0,$.TE)("inventory",["inventory:hosts:*","inventory:hosts:read"]),Te=Oe.hasAccess,je=Oe.isLoading,Me=(0,Ze.Z)(),_e=function(){var e=(0,i.Z)(c().mark((function e(){var r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ce(" ".concat(y()().format("dddd, MMMM Do YYYY, h:mm a"))),L(!0),e.next=4,(0,U.tQ)(t,z);case 4:if(r=e.sent,!Object.keys(r).length){e.next=15;break}return e.next=8,(0,U.n7)(r,z);case 8:if(!(n=e.sent).length){e.next=15;break}return n.some((function(e){return"Running"===e.status}))?Se(!0):Se(!1),e.next=13,v(r);case 13:return e.next=15,h(n);case 15:L(!1);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,Pe.Y)((function(){xe&&_e()}),6e4),(0,u.useEffect)((function(){_e()}),[t]),(0,u.useEffect)((function(){s&&we.updateDocumentTitle("".concat(s.name," - Tasks | Red Hat Insights"))}),[we,s]),(0,u.useEffect)((function(){re((0,U.AC)(S))}),[S]),(0,u.useEffect)((function(){ce&&(Me("/executed"),ue(!1))}),[ve,ce]);var Ae=(0,u.useMemo)((function(){return function(e){return m().createElement(he,(0,l.Z)({taskSlug:s.task_slug},e))}}),[S]),Be=function(){return"convert-to-rhel-conversion-stage"===s.task_slug||"convert-to-rhel-conversion"===s.task_slug};return m().createElement("div",null,W&&m().createElement(N.Z,{description:s.task_description,error:_,isOpen:W,parameters:s.parameters,selectedSystems:te,setModalOpened:Q,slug:s.task_slug,title:s.name,name:s.name}),m().createElement(H.Z,{id:s.id,isOpen:le,setIsCancel:ye,setIsDelete:ue,setModalOpened:ie,startTime:s.start_time,status:s.status,title:s.name}),_?m().createElement(D.Z,{icon:E.ZP,color:"#c9190b",title:"Task cannot be displayed",text:F.eJ,error:"Error ".concat(null==_||null===(e=_.response)||void 0===e?void 0:e.status,": ").concat(null==_?void 0:_.message)}):m().createElement(m().Fragment,null,m().createElement(f.Z,null,m().createElement(C.Breadcrumb,{ouiaId:"completed-tasks-details-breadcrumb"},m().createElement(K,{to:"/executed"},"Tasks"),m().createElement(C.BreadcrumbItem,{isActive:!0},s.name)),m().createElement(C.Flex,{columnGap:{default:"columnGapSm"},direction:{default:"column",md:"row"}},m().createElement(C.Flex,{direction:{default:"column"},flex:{default:"flex_1"}},m().createElement(C.FlexItem,null,m().createElement(g.Z,{title:s.name}),m().createElement(C.TextContent,null,m().createElement(C.Text,{component:C.TextVariants.small},s.task_title))),m().createElement(C.FlexItem,null,m().createElement(ke.D,null,s.task_description)),m().createElement(Le,{parameters:s.parameters})),m().createElement(R.Z,{data:s,flexContents:(0,F.HK)(s.task_slug,Q,s.status,ie),flexProps:F.Wb}))),m().createElement("section",{className:"pf-v5-l-page__main-section pf-v5-c-page__main-section"},m().createElement(C.Card,null,m().createElement(C.Flex,{className:"completed-task-details-info-border",justifyContent:{default:"justifyContentSpaceBetween"},direction:{default:"column",md:"row"}},m().createElement(R.Z,{data:s,flexContents:F.MZ,flexProps:F.EM}))),m().createElement("br",null),m().createElement(C.Card,null,!je&&Te?m().createElement(d.Z,{label:"".concat(s.id,"-completed-jobs"),ouiaId:"".concat(s.id,"-completed-jobs-table"),columns:Be()?j:M,items:S,filters:Be()?{filterConfig:(0,o.Z)(A)}:{filterConfig:[].concat((0,o.Z)(A),(0,o.Z)(B))},options:Ie(Ie({},F.t_),{},{exportable:Ie(Ie({},F.t_.exportable),{},{columns:Be()?j:T}),detailsComponent:S.some((function(e){return(0,U.HH)(e)}))?Ae:void 0}),emptyRows:(0,Y.f)("jobs"),isStickyHeader:!0,isTableLoading:w,footerContent:m().createElement(q.Z,{footerContent:ge,isRunning:xe,type:"jobs"})}):m().createElement(X.Z,{serviceName:"Inventory"})))))}}}]);
//# sourceMappingURL=../sourcemaps/CompletedTaskDetails.1d12b697fe72529c2ed39ab89352084c.js.map