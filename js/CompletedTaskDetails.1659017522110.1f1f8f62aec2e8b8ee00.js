"use strict";(self.webpackChunktasks_frontend=self.webpackChunktasks_frontend||[]).push([[292],{2067:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var r={};n.r(r),n.d(r,{systemFilter:()=>P});var s=n(4942),a=n(15861),l=n(70885),o=n(87757),c=n.n(o),i=n(93264),u=n.n(i),d=n(16530),m=n(95387),p=n(14748),f=n(80123),b=n(39173),y=n(99922),x=n(84564),E=n(45697),v=n.n(E),k=n(79886),g=function(e,t){var n=e.system,r=e.display_name;return u().createElement("a",{key:"system-title-".concat(t),href:"/insights/inventory/".concat(n)},r)};g.propTypes={system:v().string,display_name:v().node};var w={title:"System name",props:{width:35},sortByProp:"display_name",renderExport:function(e){return e.display_name},renderFunc:(0,k.Rg)(g)},O={title:"Result",props:{width:20},sortByProp:"status",renderExport:function(e){return e.status}},Z={title:"Message",props:{width:20},sortByProp:"message",renderExport:function(e){return e.message}},h=[w,O,Z];const _=[w,O,Z];var j=n(57318),P={type:n(83237).Y.text,label:"System",filter:function(e,t){return e.filter((function(e){return e.display_name.toLowerCase().includes(t.toLowerCase())}))}},S=n(58997),C=n(12117),F=n(45713),I=n(64600),B=n(11207),D=n(23690),M=n(65811);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const R=function(){var e,t=(0,d.useParams)().id,n=Object.values(r),s=(0,i.useState)(S.iS),o=(0,l.Z)(s,2),E=o[0],v=o[1],k=(0,i.useState)(S.Pu),g=(0,l.Z)(k,2),w=g[0],O=g[1],Z=(0,i.useState)(),P=(0,l.Z)(Z,2),T=P[0],R=P[1],z=(0,i.useState)(!1),L=(0,l.Z)(z,2),N=L[0],q=L[1],A=(0,i.useState)([]),J=(0,l.Z)(A,2),K=J[0],W=J[1],Y=(0,i.useState)(!1),G=(0,l.Z)(Y,2),Q=G[0],U=G[1],V=(0,i.useState)(!1),X=(0,l.Z)(V,2),$=X[0],ee=X[1],te=(0,i.useState)(!1),ne=(0,l.Z)(te,2),re=ne[0],se=ne[1],ae=(0,d.useHistory)(),le=function(){var e=(0,a.Z)(c().mark((function e(){var n,r,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.zz)(t);case 2:if(n=e.sent,!oe(n)){e.next=8;break}ce(n),R(n),e.next=23;break;case 8:return r="?limit=".concat(Math.pow(2,31)-1,"&offset=0"),e.next=11,(0,j.v4)(t,r);case 11:if(s=e.sent,!oe(s)){e.next=17;break}ce(s),R(s),e.next=23;break;case 17:return n.messages_count=s.data.filter((function(e){return"No vulnerability found."!==e.results.message})).length,n.system_count=s.data.length,e.next=21,v(n);case 21:return e.next=23,O(s.data);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(e){var t,n;return(null==e||null===(t=e.response)||void 0===t?void 0:t.status)&&200!==(null==e||null===(n=e.response)||void 0===n?void 0:n.status)},ce=function(e){(0,M.q)({variant:"danger",title:"Error",description:e.message,dismissable:!0,autoDismiss:!1})};return(0,i.useEffect)((function(){le()}),[]),(0,i.useEffect)((function(){W(w.map((function(e){return e.system})))}),[w]),(0,i.useEffect)((0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($&&(ae.push("/executed"),ee(!1)),!re){e.next=9;break}return e.next=4,v(S.iS);case 4:return e.next=6,O(S.Pu);case 6:return e.next=8,le();case 8:se(!1);case 9:case"end":return e.stop()}}),e)}))),[re,$]),u().createElement("div",null,u().createElement(I.Z,{description:E.description,error:T,isOpen:N,selectedSystems:K,setModalOpened:q,slug:E.task_slug,title:E.task_title}),u().createElement(B.Z,{id:E.id,isOpen:Q,setIsCancel:se,setIsDelete:ee,setModalOpened:U,startTime:E.start_time,status:E.status,title:E.task_title}),T?u().createElement(F.Z,{icon:x.ZP,color:"#c9190b",title:"Task cannot be displayed",text:S.eJ,error:"Error ".concat(null==T||null===(e=T.response)||void 0===e?void 0:e.status,": ").concat(null==T?void 0:T.message)}):u().createElement(u().Fragment,null,u().createElement(f.Z,null,u().createElement(y.Breadcrumb,{ouiaId:"completed-tasks-details-breadcrumb"},u().createElement(y.BreadcrumbItem,{to:"/beta/insights/tasks/executed"},"Tasks"),u().createElement(y.BreadcrumbItem,{isActive:!0},E.task_title)),u().createElement(y.Flex,{direction:{default:"column",md:"row"}},u().createElement(y.Flex,{direction:{default:"column"},flex:{default:"flex_1"}},u().createElement(y.FlexItem,null,u().createElement(b.Z,{title:E.task_title})),u().createElement(y.FlexItem,null,E.description)),u().createElement(C.Z,{data:E,flexContents:(0,S.HK)(E.task_slug,q,U),flexProps:S.Wb}))),u().createElement(p.Z,null,u().createElement(y.Card,null,u().createElement(y.Flex,{className:"completed-task-details-info-border",justifyContent:{default:"justifyContentSpaceBetween"},direction:{default:"column",md:"row"}},u().createElement(C.Z,{data:E,flexContents:S.MZ,flexProps:S.EM}))),u().createElement("br",null),u().createElement(y.Card,null,u().createElement(m.Z,{label:"".concat(E.id,"-completed-jobs"),ouiaId:"".concat(E.id,"-completed-jobs-table"),columns:_,items:w,filters:{filterConfig:n},options:H(H({},S.t_),{},{exportable:H(H({},S.t_.exportable),{},{columns:h})}),emptyRows:(0,D.f)("jobs"),isStickyHeader:!0})))))}}}]);
//# sourceMappingURL=../sourcemaps/CompletedTaskDetails.a7ba452371ceb015b8476ffdd536ff34.js.map