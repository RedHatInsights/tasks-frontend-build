"use strict";(self.webpackChunktasks_frontend=self.webpackChunktasks_frontend||[]).push([[550],{84564:(e,t,n)=>{t.MX={name:"ExclamationCircleIcon",height:512,width:512,svgPath:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z",yOffset:0,xOffset:0},t.$O=n(35183).createIcon(t.MX),t.ZP=t.$O},57287:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Pe});var r={};n.r(r),n.d(r,{nameFilter:()=>ge});var a=n(15861),o=n(70885),c=n(87757),l=n.n(c),s=n(93264),i=n.n(s),u=n(45697),p=n.n(u),m=n(16530),f=n(99922),d=n(14748),y=n(80123),b=function(e){var t=e.className,n=e.tabIndex,r=e.tabsList,a=e.updateTab;return i().createElement(f.Tabs,{className:t,activeKey:n,onSelect:a},r.map((function(e,t){return i().createElement(f.Tab,{id:"tabs-page-".concat(t),key:"tabs-page-".concat(t),eventKey:t,title:i().createElement(f.TabTitleText,null,e)})})))};b.propTypes={className:p().string,tabIndex:p().number,tabsList:p().array,updateTab:p().func};const v=b;var E=n(42982),O=n(4942),g=n(30319);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var h=[{key:"display_name",sortKey:"display_name",props:{width:20},title:"Name"},"tags",{key:"os_version",sortKey:"os_version",props:{width:10},title:"OS"},"updated"],j=function(e,t){return function(n){var r=n.INVENTORY_ACTION_TYPES,a=n.mergeWithEntities;return t().register(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a((0,g.zw)(r,e),{page:1,perPage:10,sortBy:{key:"last_updated",direction:"desc"}})))}},w=n(65533),P=n.n(w),T=n(34105);const S=async e=>{let t;const n=await P().get(T.WP.concat(e)).catch((function(e){return e}));return t=200===n.status?n.data:n,t},x=e=>S(T.Hu.concat(`/${e}`));var I=function(e,t,n,r,a){var o="limit=".concat(e,"&offset=").concat(t),c=function(e,t){var n="";"DESC"===t&&(n="-");var r="updated"===e?"last_seen":e;return"".concat(e?"&sort=":"").concat(n).concat(r)}(n,r),l=function(e){var t=e.hostnameOrId?"&display_name=".concat(e.hostnameOrId):"";return"".concat(t)}(a);return"?".concat(o).concat(c).concat(l)};function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=function(e){return function(){var t=(0,a.Z)(l().mark((function t(n,r){var a,o,c,s,i,u,p,m,f,d,y;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.page,o=void 0===a?1:a,c=r.per_page,s=r.orderBy,i=r.orderDirection,u=r.filters,p=I(c,o*c-c,s,i,u),t.next=6,n=p,S(T.fH.concat(n));case 6:return m=t.sent,d=(f=m||{}).data,y=f.meta.count,t.abrupt("return",{results:d.map((function(t){return Z(Z({},t),{},{selected:(e||[]).map((function(e){return e})).includes(t.id)})})),page:o,perPage:c,orderBy:s,orderDirection:i,total:y});case 9:case"end":return t.stop()}var n}),t)})));return function(e,n){return t.apply(this,arguments)}}()},F=n(54025),_=n(37282);const C=function(e){var t=e.component,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["component"]);return(0,s.useEffect)((function(){console.error("Unable to load inventory component. Failed to load ".concat(t,"."),n)}),[]),i().createElement("div",null,i().createElement("h1",null,"Unable to load inventory component"),i().createElement("h2",null,"Failed to load ",t),i().createElement("code",null,"More info can be found in browser console output."))};var M=n(94184),R=n.n(M),L=function(){return L=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},L.apply(this,arguments)},B=function(e){var t=(0,m.useHistory)(),n=(0,_.useStore)(),r=e.component;return i().createElement(r,{className:R()(e.className,"inventory")},i().createElement(s.Suspense,{fallback:e.fallback},i().createElement(F.ScalprumComponent,L({history:t,store:n,appName:"inventory",module:"./InventoryTable",scope:"inventory",ErrorComponent:i().createElement(C,L({component:"InventoryDetailHead",history:t,store:n},e)),ref:e.innerRef},e))))};B.propTypes={fallback:p().node,innerRef:p().object,component:p().string,className:p().string};var H=i().forwardRef((function(e,t){return i().createElement(B,L({innerRef:t},e))}));H.propTypes={fallback:p().node,component:p().string,className:p().string},H.defaultProps={fallback:i().createElement(f.Bullseye,{className:"pf-u-p-lg"},i().createElement(f.Spinner,{size:"xl"})),component:"section"};const z=H;function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=function(e){var t=e.selectedIds,n=e.selectIds,r=(0,s.useRef)(null),a=(0,s.useContext)(g.gE).getRegistry,o=(0,_.useDispatch)();return(0,s.useEffect)((function(){var e;o({type:"INVENTORY_INIT"}),o({type:"RESET_PAGE"}),null==r||null===(e=r.current)||void 0===e||e.onRefreshData()}),[o]),i().createElement(z,{isFullView:!0,autoRefresh:!0,initialLoading:!0,showTags:!0,hideFilters:{all:!0},columns:function(e){return h.map((function(t){var n="string"==typeof t,r=n?t:t.key,a=e.find((function(e){return e.key===r}));return W(W(W({},a),n?{key:t}:t),{},{props:W(W({},null==a?void 0:a.props),null==t?void 0:t.props)})}))},ref:r,fallback:i().createElement(f.Spinner,null),onLoad:j(h,a),getEntities:D(t),tableProps:{canSelectAll:!1,isStickyHeader:!0,onSelect:n}})};V.propTypes={selectedIds:p().array,selectIds:p().func};const Y=V;var K=n(84564),$=function(e){var t=e.button,n=e.color,r=e.error,a=e.icon,o=e.isSmall,c=e.text,l=e.title;return i().createElement(f.EmptyState,{variant:o?f.EmptyStateVariant.small:f.EmptyStateVariant.large},a?i().createElement(f.EmptyStateIcon,{icon:a,color:n||null,className:o?"small-empty-state-icon":null}):null,i().createElement("br",null),i().createElement(f.Title,{headingLevel:o?"h5":"h1",size:o?"md":"lg"},l),i().createElement(f.EmptyStateBody,null,c?c.map((function(e,t){return i().createElement(i().Fragment,{key:"line-".concat(t)},e,i().createElement("br",null))})):null,r||null),t)};$.propTypes={button:p().object,color:p().string,error:p().string,icon:p().any,isSmall:p().bool,text:p().array,title:p().string};const q=$;var G=function(e){var t,n=e.error,r=e.task,a=e.isOpen,c=e.setModalOpened,l=(0,s.useState)([]),u=(0,o.Z)(l,2),p=u[0],m=u[1],d=(0,_.useDispatch)();return(0,s.useEffect)((function(){m([])}),[r]),(0,s.useEffect)((function(){d({type:"SELECT_ENTITY",payload:{selected:p}})}),[p]),i().createElement(f.Modal,{"aria-label":"run-task-modal",title:r.title||"Error",isOpen:a,onClose:function(){return c(!1)},width:"70%"},n?i().createElement(q,{icon:K.ZP,color:"#c9190b",title:"This task cannot be displayed",text:T.eJ,error:"Error ".concat(null==n||null===(t=n.response)||void 0===t?void 0:t.status,": ").concat(null==n?void 0:n.message)}):i().createElement(i().Fragment,null,i().createElement(f.Flex,null,i().createElement(f.FlexItem,null,i().createElement("b",null,"Task description"))),i().createElement(f.Flex,{style:{paddingBottom:"8px"}},i().createElement(f.FlexItem,null,r.description)),i().createElement(f.Flex,null,i().createElement(f.FlexItem,null,i().createElement("a",{href:"".concat(T.WP).concat(T.Hu,"/").concat(r.slug,"/playbook")},"Download preview of playbook"))),i().createElement("br",null),i().createElement("b",null,"Systems to run tasks on"),i().createElement(Y,{selectedIds:p,selectIds:function(e,t,n,r){var a=(0,E.Z)(p);a.includes(r.id)?a.splice(a.indexOf(r.id),1):a.push(r.id),m(a)}})))};G.propTypes={error:p().object,isOpen:p().bool,setModalOpened:p().func,task:p().object};const J=G;var U=n(12117),X=function(e){return e.content},Q=function(e,t){return e.find((function(e){return e.props.type===t}))},ee=function(e){var t=e.children,n=e.cardClass;return Array.isArray(t)||(t=[t]),i().createElement(f.Card,{className:n},i().createElement(f.CardTitle,{className:Q(t,"title").props.className},Q(t,"title")),i().createElement(f.CardBody,{className:Q(t,"body").props.className},Q(t,"body")),i().createElement(f.CardFooter,{className:Q(t,"footer").props.className},Q(t,"footer")))};ee.propTypes={children:p().any,cardClass:p().string};const te=ee;var ne=n(35664),re=function(e){var t=e.classname,n=e.isFirst,r=e.openTaskModal,a=e.slug,o=e.variant;return i().createElement(f.Button,{"aria-label":"".concat(a,"-run-task-button"),className:t,variant:o,onClick:function(){return r(a)}},n?"Run task":"Run task again")};re.propTypes={classname:p().string,isFirst:p().bool,openTaskModal:p().func,slug:p().string,variant:p().string};const ae=re;var oe=function(e){var t,n=e.availableTasks,r=e.error,a=e.openTaskModal;return i().createElement("div",{"aria-label":"available-tasks-table"},r?i().createElement(q,{icon:K.ZP,color:"#c9190b",title:"Available tasks cannot be displayed",text:T.Rl,error:"Error ".concat(null==r||null===(t=r.response)||void 0===t?void 0:t.status,": ").concat(null==r?void 0:r.message)}):null!=n&&n.length?null==n?void 0:n.map((function(e){return i().createElement(i().Fragment,{"aria-label":e.title,key:e.title},i().createElement(te,null,i().createElement(X,{content:e.title,type:"title"}),i().createElement(X,{className:"card-task-description",content:e.description,type:"body"}),i().createElement(X,{content:i().createElement(f.Flex,{direction:{default:"column"}},i().createElement(f.FlexItem,null,i().createElement("a",{href:"".concat(T.WP).concat(T.Hu,"/").concat(e.slug,"/playbook")},"Download preview of playbook")),i().createElement(f.FlexItem,null,i().createElement(ae,{slug:e.slug,isFirst:!0,variant:"primary",openTaskModal:a}))),type:"footer"})),i().createElement("br",null))})):i().createElement(q,{title:T.kL,text:T.Fd}))};oe.propTypes={availableTasks:p().array,error:p().object,openTaskModal:p().func};const ce=oe;var le=n(65811),se=function(){var e=T.LP;return null==e?void 0:e.map((function(e,t){return i().createElement(i().Fragment,{key:"loading-".concat(t)},i().createElement(te,null,i().createElement(X,{content:i().createElement(ne.Z,{size:ne.i.md}),type:"title"}),i().createElement(X,{content:i().createElement(ne.Z,{size:ne.i.md}),type:"body"}),i().createElement(X,{content:i().createElement(ne.Z,{size:ne.i.md}),type:"footer"})),i().createElement("br",null))}))},ie=function(e){var t=e.openTaskModal,n=(0,s.useState)([]),r=(0,o.Z)(n,2),c=r[0],u=r[1],p=(0,s.useState)(!1),m=(0,o.Z)(p,2),f=m[0],d=m[1],y=(0,s.useState)(),b=(0,o.Z)(y,2),v=b[0],E=b[1],O=function(e){var t,n;null!=e&&null!==(t=e.response)&&void 0!==t&&t.status&&200!==(null==e||null===(n=e.response)||void 0===n?void 0:n.status)?(E(e),(0,le.q)({variant:"danger",title:"Error",description:e.message,dismissable:!0})):u(e.data),d(!1)};return(0,s.useEffect)((function(){var e=function(){var e=(0,a.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,S(T.Hu);case 3:t=e.sent,O(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),i().createElement("div",{"aria-label":"available-tasks"},f?i().createElement(se,null):i().createElement(ce,{availableTasks:c,error:v,openTaskModal:t}))};ie.propTypes={openTaskModal:p().func};const ue=ie;var pe=n(24423),me=n(79886),fe=function(e,t){var n=e.id,r=e.title;return i().createElement(m.Link,{key:"task-title-".concat(t),to:"/executed/".concat(n)},r)};fe.propTypes={id:p().number,title:p().string,index:p().number};var de={title:"Task",props:{width:35},sortByProp:"title",renderExport:function(e){return e.title},renderFunc:(0,me.Rg)(fe)},ye={title:"Systems",props:{width:20},sortByProp:"system_count",renderExport:function(e){return e.system_count}},be={title:"Run date/time",props:{width:20},sortByProp:"run_date_time",renderExport:function(e){return(0,me.Ws)(e.run_date_time)}},ve=[de,ye,be];const Ee=[de,ye,be];var Oe=n(22271),ge={type:n(83237).Y.text,label:"Task",filter:function(e,t){return e.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())}))}};function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const je=function(){var e=Object.values(r),t=(0,s.useState)([]),n=(0,o.Z)(t,2),a=n[0],c=n[1];return(0,s.useEffect)((function(){var e;(e=Oe.Qv).map((function(e){return e.run_date_time=(0,me.Ws)(e.end)})),c(e)}),[]),i().createElement(pe.Z,{label:"completed-tasks",ouiaId:"completed-tasks-table",columns:Ee,items:a,filters:{filterConfig:e},options:he(he({},T.t_),{},{exportable:he(he({},T.t_.exportable),{},{columns:ve})}),isStickyHeader:!0})};var we=function(e){var t=e.tab,n=(0,m.useHistory)(),r=(0,s.useState)(t),c=(0,o.Z)(r,2),u=c[0],p=c[1],b=(0,s.useState)(!1),E=(0,o.Z)(b,2),O=E[0],g=E[1],k=(0,s.useState)({}),h=(0,o.Z)(k,2),j=h[0],w=h[1],P=(0,s.useState)(),S=(0,o.Z)(P,2),I=S[0],N=S[1];(0,s.useEffect)((function(){0===t&&n.push("available")}),[]);var Z=function(){var e=(0,a.Z)(l().mark((function e(t){var n,r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t);case 2:null!=(a=e.sent)&&null!==(n=a.response)&&void 0!==n&&n.status&&200!==(null==a||null===(r=a.response)||void 0===r?void 0:r.status)?(N(a),(0,le.q)({variant:"danger",title:"Error",description:a.message,dismissable:!0})):w(a),g(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i().createElement(i().Fragment,null,i().createElement(J,{error:I,task:j,isOpen:O,setModalOpened:g}),i().createElement(y.Z,null,i().createElement(U.Z,{flexContents:T.j7,flexProps:T.Jc})),i().createElement(v,{className:"tabs-background",tabIndex:u,updateTab:function(e,t){n.push(t?"executed":"available"),p(t)},tabsList:T.EZ}),i().createElement(d.Z,null,i().createElement(f.Stack,{hasGutter:!0},i().createElement(f.StackItem,null,0===u?i().createElement(ue,{openTaskModal:Z}):i().createElement(je,null)))))};we.propTypes={tab:p().number};const Pe=we}}]);
//# sourceMappingURL=../sourcemaps/TasksPage.45cf2070d5d3a0baa806cbec5f5ee168.js.map