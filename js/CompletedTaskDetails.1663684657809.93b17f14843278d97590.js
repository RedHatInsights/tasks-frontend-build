"use strict";(self.webpackChunktasks_frontend=self.webpackChunktasks_frontend||[]).push([[292],{1627:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var r=n(4942),s=n(42982),a=n(15861),l=n(70885),c=n(87757),o=n.n(c),i=n(93264),u=n.n(i),d=n(16530),m=n(95387),p=n(14748),f=n(80123),b=n(39173),y=n(99922),E=n(84564),v=n(45697),x=n.n(v),h=n(79886),Z=function(e,t){var n=e.system,r=e.display_name;return u().createElement("a",{key:"system-title-".concat(t),href:insights.chrome.isBeta()?"/beta/insights/inventory/".concat(n):"/insights/inventory/".concat(n)},r)};Z.propTypes={system:x().string,display_name:x().node};var k={title:"System name",props:{width:35},sortByProp:"display_name",renderExport:function(e){return e.display_name},renderFunc:(0,h.Rg)(Z)},g={title:"Status",props:{width:20},sortByProp:"status",renderExport:function(e){return e.status}},w={title:"Message",props:{width:20},sortByProp:"message",renderExport:function(e){return e.message}},O=[k,g,w];const S=[k,g,w];var _=n(83237),j=[{type:_.Y.text,label:"System",filter:function(e,t){return e.filter((function(e){return e.display_name.toLowerCase().includes(t.toLowerCase())}))}}],P=[{type:_.Y.checkbox,label:"Status",filter:function(e,t){return e.filter((function(e){return t.includes(e.status.toLowerCase())}))},items:[{label:"Running",value:"running"},{label:"Success",value:"success"},{label:"Failure",value:"failure"},{label:"Timeout",value:"timeout"},{label:"Cancelled",value:"cancelled"}]}],C=n(58997),I=n(12117),B=n(45713),F=n(64600),T=n(11207),D=n(23690),L=n(87462),M=n(45987),A=["href"],H=["children"],R=function(e){var t=e.href,n=(0,M.Z)(e,A);return u().createElement(d.Link,(0,L.Z)({},n,{to:t}))};R.propTypes={href:x().string};var N=function(e){var t=e.children,n=(0,M.Z)(e,H);return u().createElement(y.BreadcrumbItem,(0,L.Z)({},n,{component:R}),t)};N.propTypes={children:x().node};const Y=N;var J=n(67303),K=n(85333),Q=n(43707);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const z=function(){var e,t=(0,d.useParams)().id,n=(0,i.useState)(C.iS),r=(0,l.Z)(n,2),c=r[0],v=r[1],x=(0,i.useState)(C.Pu),h=(0,l.Z)(x,2),Z=h[0],k=h[1],g=(0,i.useState)(),w=(0,l.Z)(g,2),_=w[0],L=w[1],M=(0,i.useState)(!1),A=(0,l.Z)(M,2),H=A[0],R=A[1],N=(0,i.useState)([]),W=(0,l.Z)(N,2),z=W[0],G=W[1],U=(0,i.useState)(!1),V=(0,l.Z)(U,2),X=V[0],$=V[1],ee=(0,i.useState)(!1),te=(0,l.Z)(ee,2),ne=te[0],re=te[1],se=(0,i.useState)(!1),ae=(0,l.Z)(se,2),le=ae[0],ce=ae[1],oe=(0,d.useHistory)(),ie=(0,Q.TE)("inventory",["inventory:*:*","inventory:*:read"]),ue=ie.hasAccess,de=ie.isLoading,me=function(){var e=(0,a.Z)(o().mark((function e(){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,J.tQ)(t,L);case 2:if(n=e.sent,!Object.keys(n).length){e.next=12;break}return e.next=6,(0,J.n7)(n,L);case 6:if(!(r=e.sent).length){e.next=12;break}return e.next=10,v(n);case 10:return e.next=12,k(r);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){me()}),[]),(0,i.useEffect)((function(){G((0,J.AC)(Z))}),[Z]),(0,i.useEffect)((0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne&&(oe.push("/executed"),re(!1)),!le){e.next=9;break}return e.next=4,v(C.iS);case 4:return e.next=6,k(C.Pu);case 6:return e.next=8,me();case 8:ce(!1);case 9:case"end":return e.stop()}}),e)}))),[le,ne]),u().createElement("div",null,u().createElement(F.Z,{description:c.task_description,error:_,isOpen:H,selectedSystems:z,setModalOpened:R,slug:c.task_slug,title:c.task_title}),u().createElement(T.Z,{id:c.id,isOpen:X,setIsCancel:ce,setIsDelete:re,setModalOpened:$,startTime:c.start_time,status:c.status,title:c.task_title}),_?u().createElement(B.Z,{icon:E.ZP,color:"#c9190b",title:"Task cannot be displayed",text:C.eJ,error:"Error ".concat(null==_||null===(e=_.response)||void 0===e?void 0:e.status,": ").concat(null==_?void 0:_.message)}):u().createElement(u().Fragment,null,u().createElement(f.Z,null,u().createElement(y.Breadcrumb,{ouiaId:"completed-tasks-details-breadcrumb"},u().createElement(Y,{to:"/executed"},"Tasks"),u().createElement(y.BreadcrumbItem,{isActive:!0},c.task_title)),u().createElement(y.Flex,{direction:{default:"column",md:"row"}},u().createElement(y.Flex,{direction:{default:"column"},flex:{default:"flex_1"}},u().createElement(y.FlexItem,null,u().createElement(b.Z,{title:c.task_title})),u().createElement(y.FlexItem,null,c.description)),u().createElement(I.Z,{data:c,flexContents:(0,C.HK)(c.task_slug,R,c.status,$),flexProps:C.Wb}))),u().createElement(p.Z,null,u().createElement(y.Card,null,u().createElement(y.Flex,{className:"completed-task-details-info-border",justifyContent:{default:"justifyContentSpaceBetween"},direction:{default:"column",md:"row"}},u().createElement(I.Z,{data:c,flexContents:C.MZ,flexProps:C.EM}))),u().createElement("br",null),u().createElement(y.Card,null,!de&&ue?u().createElement(m.Z,{label:"".concat(c.id,"-completed-jobs"),ouiaId:"".concat(c.id,"-completed-jobs-table"),columns:S,items:Z,filters:{filterConfig:[].concat((0,s.Z)(P),(0,s.Z)(j))},options:q(q({},C.t_),{},{exportable:q(q({},C.t_.exportable),{},{columns:O})}),emptyRows:(0,D.f)("jobs"),isStickyHeader:!0}):u().createElement(K.Z,{serviceName:"Inventory"})))))}}}]);
//# sourceMappingURL=../sourcemaps/CompletedTaskDetails.038c3a6ed2bb29e118327ee670dc89dd.js.map